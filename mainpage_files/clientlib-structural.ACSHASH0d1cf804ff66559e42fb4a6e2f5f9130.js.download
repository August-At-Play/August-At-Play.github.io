!function(e){var t={};function n(o){if(t[o])return t[o].exports;var r=t[o]={i:o,l:!1,exports:{}};return e[o].call(r.exports,r,r.exports,n),r.l=!0,r.exports}n.m=e,n.c=t,n.d=function(e,t,o){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:o})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var o=Object.create(null);if(n.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)n.d(o,r,function(t){return e[t]}.bind(null,r));return o},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=989)}({1:function(e,t){e.exports=$},1e3:function(e,t,n){var o,r,i;(i=this).$kp=i.$kp||{},o=[n(1),n(87),n(135),n(55),n(55),n(90),n(80),n(201),n(251)],void 0===(r=function(e,t,n,o,r,s,a,l,c){return i.$kp.KPSideNavigation||(i.$kp.KPSideNavigation=function(e,t,n,o,r,i,s,a,l,c,u){var p,f,d;return function(e){function t(e,t){return C.call(e,t)}function n(e,t){var n,o,r,i,s,a,l,c,u,p,f,d=t&&t.split("/"),g=P.map,h=g&&g["*"]||{};if(e&&"."===e.charAt(0))if(t){for(s=(e=e.split("/")).length-1,P.nodeIdCompat&&_.test(e[s])&&(e[s]=e[s].replace(_,"")),e=d.slice(0,d.length-1).concat(e),u=0;u<e.length;u+=1)if("."===(f=e[u]))e.splice(u,1),u-=1;else if(".."===f){if(1===u&&(".."===e[2]||".."===e[0]))break;u>0&&(e.splice(u-1,2),u-=2)}e=e.join("/")}else 0===e.indexOf("./")&&(e=e.substring(2));if((d||h)&&g){for(u=(n=e.split("/")).length;u>0;u-=1){if(o=n.slice(0,u).join("/"),d)for(p=d.length;p>0;p-=1)if((r=g[d.slice(0,p).join("/")])&&(r=r[o])){i=r,a=u;break}if(i)break;!l&&h&&h[o]&&(l=h[o],c=u)}!i&&l&&(i=l,a=c),i&&(n.splice(0,a,i),e=n.join("/"))}return e}function o(t,n){return function(){var o=x.call(arguments,0);return"string"!=typeof o[0]&&1===o.length&&o.push(null),c.apply(e,o.concat([t,n]))}}function r(e){return function(t){m[e]=t}}function i(n){if(t(y,n)){var o=y[n];delete y[n],v[n]=!0,l.apply(e,o)}if(!t(m,n)&&!t(v,n))throw new Error("No "+n);return m[n]}function s(e){var t,n=e?e.indexOf("!"):-1;return n>-1&&(t=e.substring(0,n),e=e.substring(n+1,e.length)),[t,e]}function a(e){return function(){return P&&P.config&&P.config[e]||{}}}var l,c,g,h,m={},y={},P={},v={},C=Object.prototype.hasOwnProperty,x=[].slice,_=/\.js$/;g=function(e,t){var o,r=s(e),a=r[0];return e=r[1],a&&(o=i(a=n(a,t))),a?e=o&&o.normalize?o.normalize(e,function(e){return function(t){return n(t,e)}}(t)):n(e,t):(a=(r=s(e=n(e,t)))[0],e=r[1],a&&(o=i(a))),{f:a?a+"!"+e:e,n:e,pr:a,p:o}},h={require:function(e){return o(e)},exports:function(e){var t=m[e];return void 0!==t?t:m[e]={}},module:function(e){return{id:e,uri:"",exports:m[e],config:a(e)}}},l=function(n,s,a,l){var c,p,f,d,P,C,x=[],_=typeof a;if(l=l||n,"undefined"===_||"function"===_){for(s=!s.length&&a.length?["require","exports","module"]:s,P=0;P<s.length;P+=1)if("require"===(p=(d=g(s[P],l)).f))x[P]=h.require(n);else if("exports"===p)x[P]=h.exports(n),C=!0;else if("module"===p)c=x[P]=h.module(n);else if(t(m,p)||t(y,p)||t(v,p))x[P]=i(p);else{if(!d.p)throw new Error(n+" missing "+p);d.p.load(d.n,o(l,!0),r(p),{}),x[P]=m[p]}f=a?a.apply(m[n],x):u,n&&(c&&c.exports!==e&&c.exports!==m[n]?m[n]=c.exports:f===e&&C||(m[n]=f))}else n&&(m[n]=a)},p=f=c=function(t,n,o,r,s){if("string"==typeof t)return h[t]?h[t](n):i(g(t,n).f);if(!t.splice){if((P=t).deps&&c(P.deps,P.callback),!n)return;n.splice?(t=n,n=o,o=null):t=e}return n=n||function(){},"function"==typeof o&&(o=r,r=s),r?l(e,t,n,o):setTimeout((function(){l(e,t,n,o)}),4),c},c.config=function(e){return c(e)},p._defined=m,(d=function(e,n,o){if("string"!=typeof e)throw new Error("See almond README: incorrect module build, no module name");n.splice||(o=n,n=[]),t(m,e)||t(y,e)||(y[e]=[e,n,o])}).amd={jQuery:!0}}(),d("almond",(function(){})),d("KPSideNavigation",["require","exports","jquery","lodash"],(function(e,t,n,o){"use strict";var r=function(){function e(){var e=this;n(document).ready((function(){e.sideNavInit()}))}return e.prototype.init=function(e){this.getFilteredEntitlements(e);var t=this;window.$kp.KPProxyPicker.ProxyPickerClient.onChange((function(n){101==n.error||102==n.error?console.log("Entitlements call failed for"+n.relid):t.getFilteredEntitlements(e)}))},e.prototype.sideNavInit=function(){var t=window.$kp.KPUserProfile.UserProfileClient,n=this;t.load().then((function(t){n.init(e.sideNavigationComp)}),(function(e){console.log("Side Navigation: KPUserProfile's API Failed")}))},e.prototype.getFilteredEntitlements=function(e){var t=this.getUrlList(e),r={};window.jsonConfigs.feature.dynamiclinklist&&window.jsonConfigs.feature.dynamiclinklist.entitlements&&(r=window.jsonConfigs.feature.dynamiclinklist.entitlements);var i=o.merge(t,this.flattenObject(r)),s=window.$kp.KPUserProfile.UserProfileClient,a=0;s.load().then((function(r){n(e).hide(),n("#loading").length?n(".side-navigation").before(n("#loading").html()):n(".dllLoadingIndicator").show(),o.each(i,(function(o,r){var i=!0;o&&(i=s.hasEntitlementForCurrentUser(o));var l=n(e+" a[href='"+r+"']");t[r]?i?l.parent().show():l.parent().hide():l.parent().show(),i&&a++})),a>0?n(e).show():n(e).hide(),n("#loading").length?n(".side-navigation").prev(".icon-loading").remove():n(".dllLoadingIndicator").hide()}),(function(e){console.log("Side Navigation: KPUserProfile's API Failed")}))},e.prototype.getUrlList=function(e){var t=n(e+" a"),o={};return n.each(t,(function(e,t){o[t.pathname]=""})),o},e.prototype.flattenObject=function(e){var t={};for(var n in e)if(e.hasOwnProperty(n))if("object"==typeof e[n]){var o=this.flattenObject(e[n]);for(var r in o)o.hasOwnProperty(r)&&(t[o[r]]=n)}else t[n]=e[n];return t},e.sideNavigationComp=".side-navigation",e}();t.kpSideNavigation=new r})),d("jquery",(function(){return e})),d("lodash",(function(){return t})),d("rsvp",(function(){return n})),d("postal",(function(){return o})),d("postal.request-response",(function(){return o})),d("js-cookie",(function(){return i})),d("kp-client-commons",(function(){return $kp.KPClientCommons})),d("kp-user-profile",(function(){return $kp.KPUserProfile})),d("kp-proxy-picker",(function(){return $kp.KPProxyPicker})),{KPSideNavigation:f("KPSideNavigation")}}(e,t,n,o,0,s)),i.$kp.KPSideNavigation}.apply(t,o))||(e.exports=r)},1001:function(e,t,n){(function(t){t.$kp||(t.$kp={}),e.exports=t.$kp.KPIconFeedContainer=n(1002)}).call(this,n(39))},1002:function(e,t,n){var o,r,i;(i=this).$kp=i.$kp||{},o=[n(1),n(87),n(135),n(55),n(55),n(90),n(80),n(201),n(251)],void 0===(r=function(e,t,n,o,r,s,a,l,c){return i.$kp.KPIconFeedContainer||(i.$kp.KPIconFeedContainer=function(e,t,n,o,r,i,s,a,l,c,u){var p,f,d;return function(e){function t(e,t){return C.call(e,t)}function n(e,t){var n,o,r,i,s,a,l,c,u,p,f,d=t&&t.split("/"),g=P.map,h=g&&g["*"]||{};if(e&&"."===e.charAt(0))if(t){for(s=(e=e.split("/")).length-1,P.nodeIdCompat&&_.test(e[s])&&(e[s]=e[s].replace(_,"")),e=d.slice(0,d.length-1).concat(e),u=0;u<e.length;u+=1)if("."===(f=e[u]))e.splice(u,1),u-=1;else if(".."===f){if(1===u&&(".."===e[2]||".."===e[0]))break;u>0&&(e.splice(u-1,2),u-=2)}e=e.join("/")}else 0===e.indexOf("./")&&(e=e.substring(2));if((d||h)&&g){for(u=(n=e.split("/")).length;u>0;u-=1){if(o=n.slice(0,u).join("/"),d)for(p=d.length;p>0;p-=1)if((r=g[d.slice(0,p).join("/")])&&(r=r[o])){i=r,a=u;break}if(i)break;!l&&h&&h[o]&&(l=h[o],c=u)}!i&&l&&(i=l,a=c),i&&(n.splice(0,a,i),e=n.join("/"))}return e}function o(t,n){return function(){var o=x.call(arguments,0);return"string"!=typeof o[0]&&1===o.length&&o.push(null),c.apply(e,o.concat([t,n]))}}function r(e){return function(t){m[e]=t}}function i(n){if(t(y,n)){var o=y[n];delete y[n],v[n]=!0,l.apply(e,o)}if(!t(m,n)&&!t(v,n))throw new Error("No "+n);return m[n]}function s(e){var t,n=e?e.indexOf("!"):-1;return n>-1&&(t=e.substring(0,n),e=e.substring(n+1,e.length)),[t,e]}function a(e){return function(){return P&&P.config&&P.config[e]||{}}}var l,c,g,h,m={},y={},P={},v={},C=Object.prototype.hasOwnProperty,x=[].slice,_=/\.js$/;g=function(e,t){var o,r=s(e),a=r[0];return e=r[1],a&&(o=i(a=n(a,t))),a?e=o&&o.normalize?o.normalize(e,function(e){return function(t){return n(t,e)}}(t)):n(e,t):(a=(r=s(e=n(e,t)))[0],e=r[1],a&&(o=i(a))),{f:a?a+"!"+e:e,n:e,pr:a,p:o}},h={require:function(e){return o(e)},exports:function(e){var t=m[e];return void 0!==t?t:m[e]={}},module:function(e){return{id:e,uri:"",exports:m[e],config:a(e)}}},l=function(n,s,a,l){var c,p,f,d,P,C,x=[],_=typeof a;if(l=l||n,"undefined"===_||"function"===_){for(s=!s.length&&a.length?["require","exports","module"]:s,P=0;P<s.length;P+=1)if("require"===(p=(d=g(s[P],l)).f))x[P]=h.require(n);else if("exports"===p)x[P]=h.exports(n),C=!0;else if("module"===p)c=x[P]=h.module(n);else if(t(m,p)||t(y,p)||t(v,p))x[P]=i(p);else{if(!d.p)throw new Error(n+" missing "+p);d.p.load(d.n,o(l,!0),r(p),{}),x[P]=m[p]}f=a?a.apply(m[n],x):u,n&&(c&&c.exports!==e&&c.exports!==m[n]?m[n]=c.exports:f===e&&C||(m[n]=f))}else n&&(m[n]=a)},p=f=c=function(t,n,o,r,s){if("string"==typeof t)return h[t]?h[t](n):i(g(t,n).f);if(!t.splice){if((P=t).deps&&c(P.deps,P.callback),!n)return;n.splice?(t=n,n=o,o=null):t=e}return n=n||function(){},"function"==typeof o&&(o=r,r=s),r?l(e,t,n,o):setTimeout((function(){l(e,t,n,o)}),4),c},c.config=function(e){return c(e)},p._defined=m,(d=function(e,n,o){if("string"!=typeof e)throw new Error("See almond README: incorrect module build, no module name");n.splice||(o=n,n=[]),t(m,e)||t(y,e)||(y[e]=[e,n,o])}).amd={jQuery:!0}}(),d("almond",(function(){})),d("KPIconFeedContainer",["require","exports","jquery","lodash"],(function(e,t,n,o){"use strict";var r=function(){function e(){console.log("KPIconFeedContainer created");var e=this;n(document).ready((function(){e.iconFeedContainerInit()}))}return e.prototype.init=function(e){this.getFilteredEntitlements(e);var t=this;window.$kp.KPProxyPicker.ProxyPickerClient.onChange((function(n){101==n.error||102==n.error?console.log("Entitlements call failed for"+n.relid):t.getFilteredEntitlements(e)}))},e.prototype.iconFeedContainerInit=function(){var t=window.$kp.KPUserProfile.UserProfileClient,n=this;t.load().then((function(t){n.init(e.iconFeedContainerComp)}),(function(e){console.log("Icon Feed Container: KPUserProfile's API Failed")}))},e.prototype.getFilteredEntitlements=function(e){var t=this,r=t.getUrlList(e),i={};window.jsonConfigs.feature.dynamiclinklist&&window.jsonConfigs.feature.dynamiclinklist.entitlements&&(i=window.jsonConfigs.feature.dynamiclinklist.entitlements);var s=o.merge(r,t.flattenObject(i)),a=window.$kp.KPUserProfile.UserProfileClient,l=0;a.load().then((function(i){n(e).hide(),n("#loading").length?n(".feed-container-content").before(n("#loading").html()):n(".dllLoadingIndicator").show(),o.each(s,(function(n,o){var i=!0;n&&(i=a.hasEntitlementForCurrentUser(n));var s=t.domToggle(e,o);r[o]?i?s.show():s.hide():s.show(),i&&l++})),l>0?n(e).show():n(e).hide(),n("#loading").length?n(".feed-container-content").prev(".icon-loading").remove():n(".dllLoadingIndicator").hide()}),(function(e){console.log("Icon Feed Container: KPUserProfile's API Failed")}))},e.prototype.domToggle=function(e,t){var o=n(e+" a[href='"+t+"']"),r=o.closest(".gs-icon-link-tile").length,i=o.closest(".gs-icon-link-text").length;return r?o.parent():i?o.closest(".gs-icon-link-text"):o.parent()},e.prototype.getUrlList=function(e){var t=n(e+" a"),o={};return n.each(t,(function(e,t){o[t.pathname]=""})),o},e.prototype.flattenObject=function(e){var t={};for(var n in e)if(e.hasOwnProperty(n))if("object"==typeof e[n]){var o=this.flattenObject(e[n]);for(var r in o)o.hasOwnProperty(r)&&(t[o[r]]=n)}else t[n]=e[n];return t},e.iconFeedContainerComp=".feed-container-content",e.currentSelectionComp=".current-selection",e.araiExpandedAttr="aria-expanded",e.araiControlsAttr="aria-controls",e.navListComp=".nav-list.-level1",e.iconChevronDownComp=".icon-chevron-down",e}();t.kpIconFeedContainer=new r})),d("jquery",(function(){return e})),d("lodash",(function(){return t})),d("rsvp",(function(){return n})),d("postal",(function(){return o})),d("postal.request-response",(function(){return o})),d("js-cookie",(function(){return i})),d("kp-client-commons",(function(){return $kp.KPClientCommons})),d("kp-user-profile",(function(){return $kp.KPUserProfile})),d("kp-proxy-picker",(function(){return $kp.KPProxyPicker})),{KPIconFeedContainer:f("KPIconFeedContainer")}}(e,t,n,o,0,s)),i.$kp.KPIconFeedContainer}.apply(t,o))||(e.exports=r)},1003:function(e,t,n){},135:function(e,t){e.exports=RSVP},201:function(e,t){e.exports=$kp.KPUserProfile},251:function(e,t){e.exports=$kp.KPProxyPicker},39:function(e,t){var n;n=function(){return this}();try{n=n||new Function("return this")()}catch(e){"object"==typeof window&&(n=window)}e.exports=n},55:function(e,t){e.exports=postal},80:function(e,t){e.exports=$kp.KPClientCommons},87:function(e,t){e.exports=_},90:function(e,t){e.exports=Cookies},989:function(e,t,n){n(990),e.exports=n(1003)},990:function(e,t,n){n(991),n(993),n(995),n(997),n(999),n(1001)},991:function(e,t,n){(function(t){t.$kp||(t.$kp={}),e.exports=t.$kp.KPClientCommons=n(992)}).call(this,n(39))},992:function(e,t,n){var o,r,i;(i=window).$kp=i.$kp||{},o=[n(1),n(87),n(135),n(55),n(55),n(90)],void 0===(r=function(e,t,n,o,r,s){return i.$kp.KPClientCommons||(i.$kp.KPClientCommons=function(e,t,n,o,r,i,s,a){var l,c,u;return function(e){function t(e,t){return C.call(e,t)}function n(e,t){var n,o,r,i,s,a,l,c,u,p,f,d=t&&t.split("/"),g=P.map,h=g&&g["*"]||{};if(e&&"."===e.charAt(0))if(t){for(s=(e=e.split("/")).length-1,P.nodeIdCompat&&_.test(e[s])&&(e[s]=e[s].replace(_,"")),e=d.slice(0,d.length-1).concat(e),u=0;u<e.length;u+=1)if("."===(f=e[u]))e.splice(u,1),u-=1;else if(".."===f){if(1===u&&(".."===e[2]||".."===e[0]))break;u>0&&(e.splice(u-1,2),u-=2)}e=e.join("/")}else 0===e.indexOf("./")&&(e=e.substring(2));if((d||h)&&g){for(u=(n=e.split("/")).length;u>0;u-=1){if(o=n.slice(0,u).join("/"),d)for(p=d.length;p>0;p-=1)if((r=g[d.slice(0,p).join("/")])&&(r=r[o])){i=r,a=u;break}if(i)break;!l&&h&&h[o]&&(l=h[o],c=u)}!i&&l&&(i=l,a=c),i&&(n.splice(0,a,i),e=n.join("/"))}return e}function o(t,n){return function(){var o=x.call(arguments,0);return"string"!=typeof o[0]&&1===o.length&&o.push(null),d.apply(e,o.concat([t,n]))}}function r(e){return function(t){m[e]=t}}function i(n){if(t(y,n)){var o=y[n];delete y[n],v[n]=!0,f.apply(e,o)}if(!t(m,n)&&!t(v,n))throw new Error("No "+n);return m[n]}function s(e){var t,n=e?e.indexOf("!"):-1;return n>-1&&(t=e.substring(0,n),e=e.substring(n+1,e.length)),[t,e]}function p(e){return function(){return P&&P.config&&P.config[e]||{}}}var f,d,g,h,m={},y={},P={},v={},C=Object.prototype.hasOwnProperty,x=[].slice,_=/\.js$/;g=function(e,t){var o,r=s(e),a=r[0];return e=r[1],a&&(o=i(a=n(a,t))),a?e=o&&o.normalize?o.normalize(e,function(e){return function(t){return n(t,e)}}(t)):n(e,t):(a=(r=s(e=n(e,t)))[0],e=r[1],a&&(o=i(a))),{f:a?a+"!"+e:e,n:e,pr:a,p:o}},h={require:function(e){return o(e)},exports:function(e){var t=m[e];return void 0!==t?t:m[e]={}},module:function(e){return{id:e,uri:"",exports:m[e],config:p(e)}}},f=function(n,s,l,c){var u,p,f,d,P,C,x=[],_=typeof l;if(c=c||n,"undefined"===_||"function"===_){for(s=!s.length&&l.length?["require","exports","module"]:s,P=0;P<s.length;P+=1)if("require"===(p=(d=g(s[P],c)).f))x[P]=h.require(n);else if("exports"===p)x[P]=h.exports(n),C=!0;else if("module"===p)u=x[P]=h.module(n);else if(t(m,p)||t(y,p)||t(v,p))x[P]=i(p);else{if(!d.p)throw new Error(n+" missing "+p);d.p.load(d.n,o(c,!0),r(p),{}),x[P]=m[p]}f=l?l.apply(m[n],x):a,n&&(u&&u.exports!==e&&u.exports!==m[n]?m[n]=u.exports:f===e&&C||(m[n]=f))}else n&&(m[n]=l)},l=c=d=function(t,n,o,r,s){if("string"==typeof t)return h[t]?h[t](n):i(g(t,n).f);if(!t.splice){if((P=t).deps&&d(P.deps,P.callback),!n)return;n.splice?(t=n,n=o,o=null):t=e}return n=n||function(){},"function"==typeof o&&(o=r,r=s),r?f(e,t,n,o):setTimeout((function(){f(e,t,n,o)}),4),d},d.config=function(e){return d(e)},l._defined=m,(u=function(e,n,o){if("string"!=typeof e)throw new Error("See almond README: incorrect module build, no module name");n.splice||(o=n,n=[]),t(m,e)||t(y,e)||(y[e]=[e,n,o])}).amd={jQuery:!0}}(),u("almond",(function(){})),u("util/Communicator",["require","exports","lodash","postal","postal.request-response","rsvp"],(function(e,t,n,o,r,i){"use strict";var s=function(){function e(){this.ENUMS={CHANNEL:{GLOBAL:"global"},TOPIC:{USER_PROFILE:"user.profile",PROXY_PICKER:"proxy.picker",ENTITLEMENTS:"entitlements",CHANGE_ENTITLEMENTS:"change_entitlements",PROXY_PICKER_API_ERROR:"proxy.picker.error",CREATE_PROXY_API_ERROR:"create.proxy.error",PROXY_AUDIT_API_ERROR:"proxy.audit.error",CONFIG_UPDATED:"config.updated",BFF_API_LOAD:"bff.api.load"}},this.CHANNEL={},this.init(),r&&console.log("Loaded")}return e.prototype.init=function(){n.bindAll(this,"createChannel"),this.postalConfiguration();var e=n.values(this.ENUMS.CHANNEL);n.each(e,this.createChannel)},e.prototype.postalConfiguration=function(){o.configuration.promise.createDeferred=function(){return new i.defer},o.configuration.promise.getPromise=function(e){return e.promise}},e.prototype.createChannel=function(e){this.CHANNEL[e]||(this.CHANNEL[e]=o.channel(e))},e}();t.communicator=new s})),u("util/CookieManager",["require","exports","js-cookie"],(function(e,n,o){"use strict";var r=function(){function e(){this.isKPDomain=location.host.indexOf("localhost"),this.KP_DOMAIN=this.isKPDomain<0?".kaiserpermanente.org":"localhost",this.KP_SECURE=this.isKPDomain<0,this.KP_PATH="/",this.TEMP_OBSSOCOOKIE_VALUE="loggedoutcontinue",this.KP_COOKIE_NAMES={KP_LANGUAGE:"kpLanguage",KP_REGION:"region",KP_REGION_PREFERENCE:"ImpSessionRoP",WPP_SEC_CHK_ID:"WPP_SEC_CHK_ID",KP_PROXY_RELATIONSHIP_ID:"ProxyRelationshipID",WPP_PROXY_RELATIONSHIP_ID:"WPP_PROXY_RELATIONSHIP_ID",KP_SIGNED_ON:"isSignedOn",KP_REGION_LINK:"regionLink",MHS_USER:"mhsUser",PV:"PV",OBSSOCOOKIE:"ObSSOCookie"},this.DEFAULT_LOCALE="en-US",this.DEFAULT_REGION="NAT",this.LOCALES={en_US:"en-US",es_US:"es-US"},this.COOKIE_OPTIONS={path:this.KP_PATH,domain:this.KP_DOMAIN,secure:this.KP_SECURE},o.defaults=this.COOKIE_OPTIONS}return e.prototype.setCookie=function(e,t,n){o.set(e,t,n)},e.prototype.removeCookie=function(e,t){o.remove(e,t)},e.prototype.getCookie=function(e){return o.get(e)},e.prototype.getLanguageCookie=function(){var e=this.getCookie(this.KP_COOKIE_NAMES.KP_LANGUAGE);return!e||e.length<=4?this.DEFAULT_LOCALE:e},e.prototype.setLanguageCookie=function(e,t){this.removeCookie(this.KP_COOKIE_NAMES.KP_LANGUAGE,this.COOKIE_OPTIONS),t&&t.expires||((t=t||{}).expires=365),e||(e=this.DEFAULT_LOCALE);var n=e.toLowerCase();("en"===n||"es"===n)&&(e=n,e+="-US"),this.setCookie(this.KP_COOKIE_NAMES.KP_LANGUAGE,e,t)},e.prototype.getRegionCookie=function(){var e=this.getCookie(this.KP_COOKIE_NAMES.KP_REGION);return e||this.DEFAULT_REGION},e.prototype.setRegionCookie=function(e,t){e||(e=this.DEFAULT_REGION),this.setCookie(this.KP_COOKIE_NAMES.KP_REGION,e,t)},e.prototype.getRegionOfPreferenceCookie=function(){return this.getCookie(this.KP_COOKIE_NAMES.KP_REGION_PREFERENCE)||""},e.prototype.setRegionOfPreferenceCookie=function(e,t){t&&t.expires||((t=t||{}).expires=3650),this.setCookie(this.KP_COOKIE_NAMES.KP_REGION_PREFERENCE,e,t)},e.prototype.setProxyRelationshipCookie=function(e){"self"===e?this.removeCookie(this.KP_COOKIE_NAMES.KP_PROXY_RELATIONSHIP_ID,this.COOKIE_OPTIONS):this.setCookie(this.KP_COOKIE_NAMES.KP_PROXY_RELATIONSHIP_ID,e,this.COOKIE_OPTIONS),this.setCookie(this.KP_COOKIE_NAMES.WPP_PROXY_RELATIONSHIP_ID,e,this.COOKIE_OPTIONS)},e.prototype.getProxyRelationshipCookie=function(){return this.getCookie(this.KP_COOKIE_NAMES.KP_PROXY_RELATIONSHIP_ID)},e.prototype.getSignedOnCookie=function(){return this.getCookie(this.KP_COOKIE_NAMES.KP_SIGNED_ON)||"false"},e.prototype.setSignedOnCookie=function(e,t){t&&t.expires||((t=t||{}).expires=365),this.setCookie(this.KP_COOKIE_NAMES.KP_SIGNED_ON,e,t)},e.prototype.setSignOnCookie=function(e){if(e){var t=document.querySelector('.region-picker [data-region-id="COL"]')||"COL"!==e.region.toUpperCase()?e.region:e.serviceArea;this.setRegionCookie(t),this.setRegionOfPreferenceCookie(t,{expires:3650}),this.setLanguageCookie(e.preferredLanguage,{expires:365}),this.setSignedOnCookie("true"),this.setCookie(this.KP_COOKIE_NAMES.KP_REGION_LINK,"noLink")}},e.prototype.setWPPSecChkIDCookie=function(e){this.setCookie(this.KP_COOKIE_NAMES.WPP_SEC_CHK_ID,e)},e.prototype.getWPPSecChkIDCookie=function(){return this.getCookie(this.KP_COOKIE_NAMES.WPP_SEC_CHK_ID)},e.prototype.getMHSUser=function(){var e=this.getCookie(this.KP_COOKIE_NAMES.MHS_USER);return e!==a&&""!==e},e.prototype.setPvCookie=function(e){this.setCookie(this.KP_COOKIE_NAMES.PV,e)},e.prototype.setPreferredLanguage=function(e){this.setLanguageCookie(e.preferredLanguage,{expires:365})},e.prototype.setTemporaryObssoCookie=function(){this.setCookie(this.KP_COOKIE_NAMES.OBSSOCOOKIE,this.TEMP_OBSSOCOOKIE_VALUE)},e.prototype.isObssoCookieTemporary=function(){var e=!1,n=this.getCookie(this.KP_COOKIE_NAMES.OBSSOCOOKIE);return t.isUndefined(n)||n!==this.TEMP_OBSSOCOOKIE_VALUE||(e=!0),e},e}();n.cookieManager=new r})),u("util/WebSessionUtil",["require","exports","./CookieManager","rsvp","jquery","lodash"],(function(e,t,n,o,r,i){"use strict";var s="keepAliveXhr",l="logoutInitiated",c=["site","S","HSESSIONID","WPP_SEC_CHK_ID","LtpaToken","LtpaToken2","ObSSOCookie"],u=function(){function e(){}return e.prototype.setSignOffFlag=function(){var e=window;e.$kp=e.$kp||{},e.$kp[l]=!0,this.killKeepAlive()},e.prototype.setKeepAliveXhr=function(e){var t=window;t.$kp=t.$kp||{},t.$kp[s]&&this.killKeepAlive(),t.$kp[s]=e},e.prototype.isKeepAliveDisabled=function(){var e=!1,t=window;return t.$kp&&t.$kp[l]&&(e=!0),e},e.prototype.isUserLoggedIn=function(){var e=n.cookieManager.getSignedOnCookie(),t=n.cookieManager.getWPPSecChkIDCookie();return"false"!==e&&""!==e||t!==a},e.prototype.newSignoff=function(){var e={};return e.arrCookies=c,i.isArray(e.arrCookies)||(e.arrCookies=c),new o.Promise((function(t,n){var o=e.arrCookies.join();console.log("queryParam",o),r.ajax("/care-web/v1.0/clear-cookies",{type:"GET",async:!1,timeout:3e3,xhrFields:{withCredentials:!0},data:{persist:o},success:function(e){"success"===e.status&&(console.log("AEM signoff api called"),t())},error:function(e,t,o){console.log("aem signoff api failed"),n({httpResponse:{code:e.status,message:o}})}})}))},e.prototype.killKeepAlive=function(){var e=window;e.$kp=e.$kp||{};var t=e.$kp[s];if(t&&4!=t.readyState)try{t.onreadystatechange&&(t.onreadystatechange=null),t.abort()}catch(e){console.log("Error While trying to call killKeepAlive :"+e)}},e.prototype.signoff=function(e){this.setSignOffFlag();try{n.cookieManager.isObssoCookieTemporary()?this.newSignoff().always((function(){this.portalSignOff()})):this.portalSignOff()}catch(e){console.log("signOff:"+e),this.portalSignOff()}return a},e.prototype.portalSignOff=function(){window.location.replace("/health/mycare/logout.wpp")},e}();t.webSessionUtil=new u})),u("util/AjaxUtil",["require","exports","lodash"],(function(e,t,n){"use strict";var o={CSRFToken:a},r=function(){function e(){}return e.prototype.getDTOAPIHeaders=function(e){var t={"X-appName":e.appName,"X-apiKey":e.apiKey,"X-useragentcategory":e.useragentcategory||"B","X-osversion":e.osversion||"0","X-useragenttype":e.useragenttype||"Desktop","X-Requested-With":"XMLHttpRequest"};return n.isUndefined(e.componentName)||(t["X-componentName"]=e.componentName),n.isUndefined(e.headers)||(t=n.extend(e.headers,t)),e.generateSessionToken&&(t["X-sessionToken"]="true"),e.putSesionToken&&(t.SessionToken=o.CSRFToken),t},e.prototype.setCSRFToken=function(e){o.CSRFToken||(o.CSRFToken=e)},e.prototype.getCSRFToken=function(){return o.CSRFToken},e}();t.ajaxUtil=new r})),u("util/AnalyticsUtil",["require","exports","./CookieManager"],(function(e,t,n){"use strict";var o=function(){function e(){}return e.prototype.setUserAnalyticsInfo=function(e){window.hasOwnProperty("digitalData")&&digitalData.global?(digitalData.global.group_id=e.groupId,digitalData.global.sub_group_id=e.subGroupId,digitalData.global.actor="",digitalData.global.rel_type="",digitalData.global.region_of_membership=e.regionOfMembership,digitalData.global.role_type=e.roleType,digitalData.global.age=e.age,digitalData.global.gender=e.gender,digitalData.global.plan_type=e.planType,digitalData.global.account_role=e.accountRole,digitalData.global.guid=e.guid,digitalData.global.region_of_registration=n.cookieManager.getRegionCookie(),digitalData.global.region_of_preference=n.cookieManager.getRegionOfPreferenceCookie(),digitalData.global.language=n.cookieManager.getLanguageCookie(),digitalData.global.proxySubjectCount===a&&(digitalData.global.proxySubjectCount=e.proxyCount),digitalData.globalUserProfile=e):console.log("digitalData does not exist")},e.prototype.setRegionAnalyticsInfo=function(){window.hasOwnProperty("digitalData")&&digitalData.global?(digitalData.global.region_of_registration=n.cookieManager.getRegionCookie(),digitalData.global.region_of_preference=n.cookieManager.getRegionOfPreferenceCookie()):console.log("digitalData does not exist")},e.prototype.setLanguageAnalyticsInfo=function(){window.hasOwnProperty("digitalData")&&digitalData.global?digitalData.global.language=n.cookieManager.getLanguageCookie():console.log("digitalData does not exist")},e.prototype.setAnalyticsInfo=function(e){if(window.hasOwnProperty("digitalData")){for(var t=0,n=e;t<n.length;t++){var o=n[t];digitalData[o.dtmObject]?digitalData[o.dtmObject][o.dtmAttribute]=o.dtmValue:console.log("digitalData."+o.dtmObject+" does not exist")}console.log(digitalData)}else console.log("digitalData does not exist")},e}();t.analyticsUtil=new o})),u("constants/SiteUrls",["require","exports"],(function(e,t){"use strict";t.SiteUrls={SESSION_TYPE_CLIENT_PATH:"/care/idm/v1.0/keepalive",SESSION_TYPE_OBSSO_PATH:"/health/mycare/consumer/keepalive",INTERRUPT_PATH_PATTERN:"interrupt",HASH_PATTERN:"#/"},t.UIRouterPaths={REQUIRED_INTERRUPT_MAP:["terms-conditions","temp-password","email-mismatch","secret-questions"]}})),u("util/KeepAliveUtil",["require","exports","../constants/SiteUrls"],(function(e,t,n){"use strict";var o=function(){function e(){this.uiRouterPaths=n.UIRouterPaths}return e.prototype.getMap=function(e){var t=[];return e.REQUIRED_INTERRUPT_MAP.forEach((function(e){t.push(window.location.pathname+n.SiteUrls.HASH_PATTERN+e)})),t},e.prototype.buildKeepAliveUrlPath=function(e){var t=n.SiteUrls.SESSION_TYPE_OBSSO_PATH;if(!0===new RegExp(n.SiteUrls.INTERRUPT_PATH_PATTERN).test(window.location.pathname)){for(var o=window.location.pathname+window.location.hash,r=this.getMap(e),i=[],s=r.indexOf(o);-1!==s;)i.push(s),s=r.indexOf(o,s+1);i.length>0&&(t=n.SiteUrls.SESSION_TYPE_CLIENT_PATH)}return t},e}();t.keepAliveUtil=new o})),u("util/DTMCommunicatorUtil",["require","exports"],(function(e,t){"use strict";var n=function(){function e(){this.DTMConstants={MBOX_TARGET:"target-global-mbox",PAGE_CLASS_NAME:".kp-body-component",AJAX_TIMEOUT:5e3},console&&console.log("DTMCommunicatorUtil loaded.")}return e.prototype.requestOffers=function(e){var t=this,n=window.adobe;console&&console.log("requestCampaignOffers called:"+n),n&&n.target&&n.target.getOffer({mbox:this.DTMConstants.MBOX_TARGET,success:function(e){n.target.applyOffer({element:t.DTMConstants.PAGE_CLASS_NAME,offer:e})},error:function(e,t){console&&console.log&&(console.log(e),console.log(t))},timeout:this.DTMConstants.AJAX_TIMEOUT})},e}();t.DTMCommunicatorUtil=n,t.util=new n})),u("services/BffAPIService",["require","exports","jquery","rsvp"],(function(e,t,n,o){"use strict";var r=function(){function e(){}return e.prototype.processResponseHeaders=function(e){var t={};return e&&(e.getAllResponseHeaders()||"").trim().split(/[\r\n]+/).forEach((function(e){var n=e.split(": "),o=n.shift(),r=n.join(": ");t[o.toLowerCase()]=isNaN(r)?r:+r})),t},e.prototype.loadBFFAPIWithConfig=function(e){var t=this;return new o.Promise((function(o,r){n.ajax({url:e.url,type:"GET",async:!0,headers:e.headers,timeout:e.timeout||5e3,xhrFields:{withCredentials:!0}}).done((function(e,n,r){e.responseHeaders=t.processResponseHeaders(r||e.xhr),o(e)})).fail((function(e,t,n){r(e)}))}))},e}();t.bffAPIService=new r})),u("services/BffAPIServiceManager",["require","exports","rsvp","./BffAPIService"],(function(e,t,n,o){"use strict";var r={data:a},i="INIT",s=function(){function e(){}return e.prototype.getData=function(){return r},e.prototype.isDataLoaded=function(){return"INIT"!=i},e.prototype.loadBFFAPIs=function(e){for(var t=n.defer(),s={},a=0,l=e;a<l.length;a++){var c=l[a],u=c.code,p=o.bffAPIService.loadBFFAPIWithConfig(c);s[u]=p}return n.hashSettled(s).then((function(e){r.data=e,i="RESOLVE",t.resolve(r)})),t.promise},e}();t.bffAPIServiceManager=new s})),u("util/WebUtil",["require","exports","jquery","./Communicator","../services/BffAPIServiceManager"],(function(e,t,n,o,r){"use strict";var i=function(){function e(){}return e.prototype.isAuthorEditMode=function(){var e=n("body").data();return!(!e||!e.authoreditmode)},e.prototype.sendBFFInitMessageResponse=function(e,t){e.err?t.reply(e.err):t.reply(null,e)},e.prototype.loadBFFAPIs=function(e){var t,n=this,i=o.communicator,s=r.bffAPIServiceManager;i.CHANNEL[i.ENUMS.CHANNEL.GLOBAL].subscribe(i.ENUMS.TOPIC.BFF_API_LOAD,(function(e,o){if(s.isDataLoaded()){var r=s.getData();n.sendBFFInitMessageResponse(r,o)}else t.then((function(e){n.sendBFFInitMessageResponse(e,o)}))})),t=s.loadBFFAPIs(e)},e}();t.webUtil=new i})),u("KPClientCommons",["require","exports","./util/Communicator","./util/CookieManager","./util/WebSessionUtil","./util/AjaxUtil","./util/AnalyticsUtil","./util/KeepAliveUtil","./util/DTMCommunicatorUtil","./util/WebUtil"],(function(e,t,n,o,r,i,s,a,l,c){"use strict";t.instance={Communicator:n.communicator,CookieManager:o.cookieManager,WebSessionUtil:r.webSessionUtil,AjaxUtil:i.ajaxUtil,AnalyticsUtil:s.analyticsUtil,KeepAliveUtil:a.keepAliveUtil,DTMCommunicatorGeneric:l.util,WebUtil:c.webUtil}})),u("ngProvider/DTMCommunicator",(function(){})),u("jquery",(function(){return e})),u("lodash",(function(){return t})),u("rsvp",(function(){return n})),u("postal",(function(){return o})),u("postal.request-response",(function(){return o})),u("js-cookie",(function(){return i})),{Communicator:c("util/Communicator").communicator,CookieManager:c("util/CookieManager").cookieManager,WebSessionUtil:c("util/WebSessionUtil").webSessionUtil,AjaxUtil:c("util/AjaxUtil").ajaxUtil,AnalyticsUtil:c("util/AnalyticsUtil").analyticsUtil,KeepAliveUtil:c("util/KeepAliveUtil").keepAliveUtil,WebUtil:c("util/WebUtil").webUtil}}(e,t,n,o,0,s)),i.$kp.KPClientCommons}.apply(t,o))||(e.exports=r)},993:function(e,t,n){(function(t){t.$kp||(t.$kp={}),e.exports=t.$kp.KPUserProfile=n(994)}).call(this,n(39))},994:function(e,t,n){var o,r,i;(i=window).$kp=i.$kp||{},o=[n(1),n(87),n(135),n(55),n(55),n(90),n(80)],void 0===(r=function(e,t,n,o,r,s,a){return i.$kp.KPUserProfile||(i.$kp.KPUserProfile=function(e,t,n,o,r,i,s,a,l){var c,u,p;return function(e){function t(e,t){return C.call(e,t)}function n(e,t){var n,o,r,i,s,a,l,c,u,p,f,d=t&&t.split("/"),g=P.map,h=g&&g["*"]||{};if(e&&"."===e.charAt(0))if(t){for(s=(e=e.split("/")).length-1,P.nodeIdCompat&&_.test(e[s])&&(e[s]=e[s].replace(_,"")),e=d.slice(0,d.length-1).concat(e),u=0;u<e.length;u+=1)if("."===(f=e[u]))e.splice(u,1),u-=1;else if(".."===f){if(1===u&&(".."===e[2]||".."===e[0]))break;u>0&&(e.splice(u-1,2),u-=2)}e=e.join("/")}else 0===e.indexOf("./")&&(e=e.substring(2));if((d||h)&&g){for(u=(n=e.split("/")).length;u>0;u-=1){if(o=n.slice(0,u).join("/"),d)for(p=d.length;p>0;p-=1)if((r=g[d.slice(0,p).join("/")])&&(r=r[o])){i=r,a=u;break}if(i)break;!l&&h&&h[o]&&(l=h[o],c=u)}!i&&l&&(i=l,a=c),i&&(n.splice(0,a,i),e=n.join("/"))}return e}function o(t,n){return function(){var o=x.call(arguments,0);return"string"!=typeof o[0]&&1===o.length&&o.push(null),d.apply(e,o.concat([t,n]))}}function r(e){return function(t){m[e]=t}}function i(n){if(t(y,n)){var o=y[n];delete y[n],v[n]=!0,f.apply(e,o)}if(!t(m,n)&&!t(v,n))throw new Error("No "+n);return m[n]}function s(e){var t,n=e?e.indexOf("!"):-1;return n>-1&&(t=e.substring(0,n),e=e.substring(n+1,e.length)),[t,e]}function a(e){return function(){return P&&P.config&&P.config[e]||{}}}var f,d,g,h,m={},y={},P={},v={},C=Object.prototype.hasOwnProperty,x=[].slice,_=/\.js$/;g=function(e,t){var o,r=s(e),a=r[0];return e=r[1],a&&(o=i(a=n(a,t))),a?e=o&&o.normalize?o.normalize(e,function(e){return function(t){return n(t,e)}}(t)):n(e,t):(a=(r=s(e=n(e,t)))[0],e=r[1],a&&(o=i(a))),{f:a?a+"!"+e:e,n:e,pr:a,p:o}},h={require:function(e){return o(e)},exports:function(e){var t=m[e];return void 0!==t?t:m[e]={}},module:function(e){return{id:e,uri:"",exports:m[e],config:a(e)}}},f=function(n,s,a,c){var u,p,f,d,P,C,x=[],_=typeof a;if(c=c||n,"undefined"===_||"function"===_){for(s=!s.length&&a.length?["require","exports","module"]:s,P=0;P<s.length;P+=1)if("require"===(p=(d=g(s[P],c)).f))x[P]=h.require(n);else if("exports"===p)x[P]=h.exports(n),C=!0;else if("module"===p)u=x[P]=h.module(n);else if(t(m,p)||t(y,p)||t(v,p))x[P]=i(p);else{if(!d.p)throw new Error(n+" missing "+p);d.p.load(d.n,o(c,!0),r(p),{}),x[P]=m[p]}f=a?a.apply(m[n],x):l,n&&(u&&u.exports!==e&&u.exports!==m[n]?m[n]=u.exports:f===e&&C||(m[n]=f))}else n&&(m[n]=a)},c=u=d=function(t,n,o,r,s){if("string"==typeof t)return h[t]?h[t](n):i(g(t,n).f);if(!t.splice){if((P=t).deps&&d(P.deps,P.callback),!n)return;n.splice?(t=n,n=o,o=null):t=e}return n=n||function(){},"function"==typeof o&&(o=r,r=s),r?f(e,t,n,o):setTimeout((function(){f(e,t,n,o)}),4),d},d.config=function(e){return d(e)},c._defined=m,(p=function(e,n,o){if("string"!=typeof e)throw new Error("See almond README: incorrect module build, no module name");n.splice||(o=n,n=[]),t(m,e)||t(y,e)||(y[e]=[e,n,o])}).amd={jQuery:!0}}(),p("almond",(function(){})),p("Helpers/UserParser",["require","exports","lodash"],(function(e,t,n){"use strict";var o=function(){function e(){}return e.prototype.parseProxies=function(e){var t=[];return n.each(e.Proxies,(function(n){var o=!0===n.DualChoice?"Y":"N",r={relationshipID:n.RelID,name:n.Name,deploymentId:n.DeploymentDescriptor||e.deploymentID,firstName:n.FirstName,lastName:n.LastName,dob:n.DateOfBirth,status:n.Status,relation:n.Relation,type:n.Type,gender:n.Gender,id:n.ID,fromDate:n.FromDate,toDate:n.ToDate,upId:n.UpID,hasDualChoicePlan:o,memberShipStatus:n.memberShipStatus,ebizRole:n.ebizRole,userType:n.userType||[],registered:n.registered,planInfos:n.planInfos};t.push(r)})),t},e.prototype.parse=function(e,t){var o,r,i,s,a,l,c,u,p=e.UserAccountData?e.UserAccountData:{},f="",d=!1,g=!1,h="",m=null,y=null,P="",v="",C=null,x=!1,_=!1,I=!1,b=null,k=0,E=null,S=[];if(p&&(o=p.userIdentityInfo?p.userIdentityInfo:{},r=p.ebizAccountsWithPersonInfos?p.ebizAccountsWithPersonInfos:{},l=p.ebizAccountsWithPersonInfos.governmentProgramInfos?p.ebizAccountsWithPersonInfos.governmentProgramInfos:{}),t&&(k=(c=t.ProxyInformation&&t.ProxyInformation.Proxies?this.parseProxies(t.ProxyInformation):[]).length,u=t.ProxyInformation?t.ProxyInformation.deploymentID:""),l&&n.each(l,(function(e){e.identifier&&"MEDICARE"===e.identifier&&(e.hasOwnProperty("status")&&(m=e.status),e.hasOwnProperty("statusCode")&&(P=e.statusCode)),e.identifier&&"MEDICARE_PART_D"===e.identifier&&e.hasOwnProperty("status")&&(y=e.status)})),r){if(r.nameDetails&&(f=r.nameDetails.surname,h=r.nameDetails.firstName),r.ebizAccountInfos&&r.ebizAccountInfos.length>0&&r.ebizAccountInfos[0].eBizAccountRoleInfo.length>0&&(a=r.ebizAccountInfos[0].eBizAccountRoleInfo[0],"MBR"==r.ebizAccountInfos[0].eBizAccountRoleInfo[0].accountRole&&(d=!0),"CAFH"==r.ebizAccountInfos[0].eBizAccountRoleInfo[0].accountRole&&(g=!0)),r.membershipAccountInfo&&r.membershipAccountInfo.planInfos&&r.membershipAccountInfo.planInfos.length>0&&(i=r.membershipAccountInfo.planInfos[0]),r.membershipAccountInfo&&(r.membershipAccountInfo.accountStatus&&(v=r.membershipAccountInfo.accountStatus),b=(s=r.membershipAccountInfo).healthInsuranceExchangeInfo,E=s.empiID,C=s.newMemberEffectiveDate,x=s.returnedNewMember,null!=C)){var A=new Date;C=C.replace(/[^\d-]/g,"");var w=new Date(C),U=new Date(C);U.setDate(U.getDate()+365),A>=w&&U>=A&&(0==x?_=!0:1==x&&(I=!0))}if(r.areaOfCareInfos)if("[object Array]"==={}.toString.call(r.areaOfCareInfos))for(var O=0,D=r.areaOfCareInfos;O<D.length;O++){var N=D[O];S.push(N)}else S.push(r.areaOfCareInfos)}return{user:{name:h+" "+f,firstName:h,lastName:f,guid:o.guid,isMember:d,isCAFH:g,isMemberOrCAFH:d||g,region:o.regionId,gender:r.gender,language:o.preferredLanguage,selectedRegion:o.regionId,homeRegion:o.regionId,deploymentId:u,preferredGivenName:n.isEmpty(o.preferredGivenName)?h:o.preferredGivenName,epicEmail:"",serviceArea:"",age:r.age,selfFunded:i?i.selfFunded.toString():"",groupId:i?i.purchaserId:"",subGroupId:s?s.enrollmentUnit:"",actor:"",relType:"",regionOfMembership:s?s.region:"",roleType:a?a.accountRole:"",planType:i?i.consumerPlanType:"",accountRole:s?s.accountRole:"",proxyCount:k,hasDualChoicePlan:i&&i.isDualChoice?"Y":"N",coverageStartDate:i&&i.coverageStartDate,coverageEndDate:i&&i.coverageEndDate,purchaserName:i&&i.purchaserName,medicareStatus:m,medicareStatusCode:P,membershipAccountStatus:v,medicarePartDStatus:y,newMemberEffectiveDate:C,returnedNewMember:x,isNewMember:_,isReturningMember:I,activationDate:o.activationDate,healthInsuranceExchangeInfo:b,userType:s?s.userType:"",purchaserCategory:i&&i.purchaserCategory||"",consumerPlanType:i&&i.consumerPlanType||"",productType:i&&i.productType||"",empiID:E,areaOfCareInfos:S},proxies:c||[]}},e.prototype.getAge=function(e){if(e.dob){var t=e.dob,n=new Date,o=new Date(t),r=n.getFullYear()-o.getFullYear(),i=n.getMonth()-o.getMonth();return(0>i||0===i&&n.getDate()<o.getDate())&&r--,r}return-1},e.prototype.parseUser=function(e,t){return{user:{name:e.firstName+" "+e.lastName,firstName:e.firstName,lastName:e.lastName,preferredGivenName:e.preferredGivenName||e.firstName},proxies:[]}},e.prototype.parseEntitlements=function(e){var t=e.Entitlements&&e.Entitlements.AuthDecisions||[],o={};return n.each(t,(function(e){var t="P"===e.Decision,n=e.Id;o[n]=t})),o||[]},e}();t.userParser=new o})),p("Utils/LogUtil",["require","exports"],(function(e,t){"use strict";var n=function(){function e(){}return e.prototype.getRSVPLogMessage=function(e,t){return{code:"",message:t}},e.prototype.logError=function(e,t){var n="%cCaller:"+e+"::Error Code::"+t.code+"::Message::"+t.message;console.log&&console.log(n,"background: red; color: white")},e}();t.logUtil=new n})),p("Constants/SiteUrls",["require","exports"],(function(e,t){"use strict";t.SiteUrls={INTERRUPT_PATH_PATTERN:"interrupt",HASH_PATTERN:"#/"},t.InterruptType={REQUIRED:"REQUIRED",IGNORABLE:"IGNORABLE"},t.UIRouterPaths={REQUIRED_INTERRUPT_MAP:["terms-conditions","temp-password","email-mismatch","secret-questions"]}})),p("Service/UserService",["require","exports","jquery","rsvp","kp-client-commons","../Constants/SiteUrls"],(function(e,t,n,o,r,i){"use strict";var s=function(){function e(){this.uiRouterPaths=i.UIRouterPaths}return e.prototype.getInterruptMap=function(e){var t=[];return e.REQUIRED_INTERRUPT_MAP.forEach((function(e){t.push(window.location.pathname+i.SiteUrls.HASH_PATTERN+e)})),t},e.prototype.getInterruptType=function(e){var t=i.InterruptType.IGNORABLE;if(!0===new RegExp(i.SiteUrls.INTERRUPT_PATH_PATTERN).test(window.location.pathname)){for(var n=window.location.pathname+window.location.hash,o=this.getInterruptMap(e),r=[],s=o.indexOf(n);-1!==s;)r.push(s),s=o.indexOf(n,s+1);r.length>0&&(t=i.InterruptType.REQUIRED)}return t},e.prototype.get=function(e){var t=!1,s=!1;e&&e.entitlements&&(t=!0),e&&e.proxy&&e.entitlements&&(s=!0);var a,l,c={"X-includeEntitlements":t,"X-includeProxyEntitlements":s,"X-retainJsonSchema":!0,"X-versionId":"3.0.1.0","X-inclusionJsonPath":["$.UserAccountData.ebizAccountsWithPersonInfos.nameDetails","$.UserAccountData.userIdentityInfo.guid","$.UserAccountData.ebizAccountsWithPersonInfos.membershipAccountInfo.planInfos[0].purchaserId","$.UserAccountData.ebizAccountsWithPersonInfos.membershipAccountInfo.enrollmentUnit","$.UserAccountData.ebizAccountsWithPersonInfos.membershipAccountInfo.region","$.UserAccountData.ebizAccountsWithPersonInfos.ebizAccountInfos[0].eBizAccountRoleInfo[0].accountRole","$.UserAccountData.ebizAccountsWithPersonInfos.age","$.UserAccountData.ebizAccountsWithPersonInfos.gender","$.UserAccountData.ebizAccountsWithPersonInfos.membershipAccountInfo.planInfos[0].consumerPlanType","$.UserAccountData.ebizAccountsWithPersonInfos.membershipAccountInfo.accountRole","$.UserAccountData.userIdentityInfo.preferredGivenName","$.UserAccountData.userIdentityInfo.preferredLanguage","$.UserAccountData.userIdentityInfo.regionId","$.UserAccountData.ebizAccountsWithPersonInfos.membershipAccountInfo.planInfos[0].selfFunded","$.UserAccountData.ebizAccountsWithPersonInfos.governmentProgramInfos","$.UserAccountData.ebizAccountsWithPersonInfos.membershipAccountInfo.accountStatus","$.UserAccountData.ebizAccountsWithPersonInfos.membershipAccountInfo.planInfos[0].isDualChoice","$.UserAccountData.ebizAccountsWithPersonInfos.membershipAccountInfo.newMemberEffectiveDate","$.UserAccountData.ebizAccountsWithPersonInfos.membershipAccountInfo.returnedNewMember","$.UserAccountData.ebizAccountsWithPersonInfos.membershipAccountInfo.healthInsuranceExchangeInfo","$.UserAccountData.ebizAccountsWithPersonInfos.membershipAccountInfo.planInfos[0].coverageStartDate","$.UserAccountData.ebizAccountsWithPersonInfos.membershipAccountInfo.planInfos[0].coverageEndDate","$.UserAccountData.ebizAccountsWithPersonInfos.membershipAccountInfo.planInfos[0].purchaserName","$.UserAccountData.ebizAccountsWithPersonInfos.membershipAccountInfo.userType","$.UserAccountData.userIdentityInfo.activationDate","$.UserAccountData.ebizAccountsWithPersonInfos.membershipAccountInfo.planInfos[0].productType","$.UserAccountData.ebizAccountsWithPersonInfos.membershipAccountInfo.planInfos[0].purchaserCategory","$.UserAccountData.ebizAccountsWithPersonInfos.areaOfCareInfos","$.UserAccountData.ebizAccountsWithPersonInfos.membershipAccountInfo.empiID"].join(";")},u=jsonConfigs,p=u.global.apiUrl+u.global.userNameApiUri;"useronly"==u.global.userProfileFeature&&(a=this.getInterruptType(this.uiRouterPaths),l=u.global.mycareUserApiUri,a===i.InterruptType.REQUIRED&&(l=u.global.careUserApiUri),p=u.global.apiUrl+l),"all"==u.global.userProfileFeature&&(a=this.getInterruptType(this.uiRouterPaths),l=u.global.mycareUserApiUri,a===i.InterruptType.REQUIRED&&(l=u.global.careUserApiUri),p=u.global.apiUrl+l);var f={apiKey:u.feature.apiKey,appName:u.feature.appName,componentName:u.global.userComponentName,generateSessionToken:!0,headers:c};return new o.Promise((function(e,t){console.log("checking for multiple teams");var o="true"==$kp.KPClientCommons.CookieManager.getSignedOnCookie(),i="localhost"==window.location.hostname||"local.kaiserpermanente.org"==window.location.hostname,s=n("body").hasClass("webview-content");(o||i||s)&&(console.log("passed 1 of the checks"),n.ajax(p,{type:"GET",async:!0,headers:r.AjaxUtil.getDTOAPIHeaders(f),xhrFields:{withCredentials:!0},success:function(t,n,o){if(o&&f.generateSessionToken&&r.AjaxUtil.setCSRFToken(o.getResponseHeader("SessionToken")),t){var i=window;i.$kp=i.$kp||{mockdata:{}},i.$kp.contactInfo=t.UserAccountData.ebizAccountsWithPersonInfos.contactInfo.addressInfos}e(t)},error:function(e,n,o){t({httpResponse:{code:e.status,message:o}})}}))}))},e}();Object.defineProperty(t,"__esModule",{value:!0}),t.default=s})),p("Utils/AjaxUtil",["require","exports","lodash"],(function(e,t,n){"use strict";var o=function(){function e(){}return e.prototype.getHeadersWithCSRF=function(e){return n.isUndefined(e)&&(e={}),e["X-sessionToken"]="true",this.getHeaders(e)},e.prototype.getHeaders=function(e){var t=jsonConfigs,o={"X-appName":t.feature.appName,"X-apiKey":t.feature.apiKey,"X-useragentcategory":"W","X-osversion":"linux","X-useragenttype":"chrome","Content-Type":"application/json"};return n.isUndefined(e)||(o=n.extend(e,o)),o},e}();t.ajaxUtil=new o})),p("Service/EntitlementService",["require","exports","jquery","../Utils/AjaxUtil","rsvp"],(function(e,t,n,o,r){"use strict";var i=function(){function e(){}return e.prototype.get=function(e,t,i){var s=jsonConfigs,a=s.global.apiUrl+s.global.entitlementsApiUri,c="self"!==e?e:l;return new r.Promise((function(e,r){t&&t.entitlements!==l&&!0!==t.entitlements?e({}):n.ajax(a,{type:"GET",headers:o.ajaxUtil.getHeaders({"X-componentName":s.global.entitlementsComponentName}),xhrFields:{withCredentials:!0},data:{relid:c,ent:i},traditional:!0,crossDomain:!0,success:function(t){e(t)},error:function(e,t,n){r({httpResponse:{code:e.status,message:n}})}})}))},e}();Object.defineProperty(t,"__esModule",{value:!0}),t.default=i})),p("Service/ProxyService",["require","exports","jquery","../Utils/AjaxUtil","rsvp"],(function(e,t,n,o,r){"use strict";var i=function(){function e(){}return e.prototype.get=function(e){var t=jsonConfigs,i=o.ajaxUtil.getHeaders({"X-encryption":"true","X-versionId":"2.2","X-componentName":t.global.proxyComponentName}),s=t.global.apiUrl+t.global.proxyNoCacheApiUri;return new r.Promise((function(t,o){e&&e.proxy!==l&&!0!==e.proxy?t({}):n.ajax(s,{type:"GET",headers:i,xhrFields:{withCredentials:!0},crossDomain:!0,success:function(e){t(e)},error:function(e,t,n){o({httpResponse:{code:e.status,message:n}})}})}))},e}();Object.defineProperty(t,"__esModule",{value:!0}),t.default=i})),p("Service/ConfigService",["require","exports","jquery","rsvp"],(function(e,t,n,o){"use strict";var r=function(){function e(){}return e.prototype.get=function(e){var t=jsonConfigs,r=window.location.protocol+"//"+window.location.hostname;"localhost"==window.location.hostname&&(r+=":9080");var s=i.get("DSTargetEnv"),a=t[e],l=""+r+("global"===e?a.configUrl:"/config-json/"+a.appName+".json")+(a.targetEnv==s&&a.jsonHash?"?currentHash="+a.jsonHash:"");return new o.Promise((function(e,t){n.ajax(l,{cache:!1,success:function(t){t&&t.jsonHash&&(t.targetEnv=s),e(t)},error:function(e,n,o){t({message:o})}})}))},e}();Object.defineProperty(t,"__esModule",{value:!0}),t.default=r})),p("Factory/Service/ServiceFactory",["require","exports","../../Service/UserService","../../Service/EntitlementService","../../Service/ProxyService","../../Service/ConfigService"],(function(e,t,n,o,r,i){"use strict";t.services={userService:new n.default,entitlementService:new o.default,proxyService:new r.default,configService:new i.default}})),p("MockService/UserService",["require","exports","rsvp"],(function(e,t,n){"use strict";var o=function(){function e(){}return e.prototype.getInterruptType=function(e){return""},e.prototype.get=function(e){var t=window;return new n.Promise((function(e,n){var o=t.$kp.mockdata.user||{};setTimeout((function(){e(o)}),100)}))},e}();Object.defineProperty(t,"__esModule",{value:!0}),t.default=o})),p("MockService/EntitlementService",["require","exports","rsvp"],(function(e,t,n){"use strict";var o=function(){function e(){}return e.prototype.get=function(e,t,o){var r=window;return new n.Promise((function(e,t){var n=r.$kp.mockdata.entitlements||{};setTimeout((function(){e(n)}),100)}))},e}();Object.defineProperty(t,"__esModule",{value:!0}),t.default=o})),p("MockService/ProxyService",["require","exports","rsvp"],(function(e,t,n){"use strict";var o=function(){function e(){}return e.prototype.get=function(e){var t=window;return new n.Promise((function(e,n){var o=t.$kp.mockdata.proxies||{};setTimeout((function(){e(o)}),100)}))},e}();Object.defineProperty(t,"__esModule",{value:!0}),t.default=o})),p("Factory/Service/MockServiceFactory",["require","exports","../../MockService/UserService","../../MockService/EntitlementService","../../MockService/ProxyService","../../Service/ConfigService"],(function(e,t,n,o,r,i){"use strict";t.services={userService:new n.default,entitlementService:new o.default,proxyService:new r.default,configService:new i.default}})),p("Factory/Service/ServiceFactoryManager",["require","exports","./ServiceFactory","./MockServiceFactory","kp-client-commons"],(function(e,t,n,o,r){"use strict";var i=function(){function e(){}return e.prototype.getInstance=function(){if(console.log("WebUtil.isAuthorEditMode()"+r.WebUtil.isAuthorEditMode()),r.WebUtil.isAuthorEditMode()){var e=window;return e.$kp=e.$kp||{mockdata:{}},e.$kp.mockdata=e.$kp.mockdata||{},o}return n},e}();t.serviceFactoryManager=new i})),p("UserProfileServer",["require","exports","./Helpers/UserParser","lodash","rsvp","kp-client-commons","./Utils/LogUtil","./Factory/Service/ServiceFactoryManager"],(function(t,n,o,r,i,s,a,c){"use strict";var u,p=c.serviceFactoryManager.getInstance().services,f=p.userService,d=p.proxyService,g=p.entitlementService,h=p.configService;!function(e){e[e.start=0]="start",e[e.inprogress=1]="inprogress",e[e.success=2]="success",e[e.error=3]="error"}(u||(u={}));var m="self",y="UserProfleServer.callAllProfileServices",P="fulfilled",v={_userProfile:l,_entitlements:{},_CSRFToken:l,_isUserSuccess:null,_isProxySuccess:null,_isEntitlementsSuccess:null},C={_hasUserProfile:!1,_useMockServer:!1,_userPromiseStatus:u.start,_promises:l,_entitlementPromise:{}},x=function(){function t(){}return t.prototype.loadUserProfile=function(e){var t=i.defer();return C._useMockServer&&(e.options=e.options||{},e.options.mockServerAPI=C._mockServerAPI),this.getUserProfile(e.options,t),t.promise},t.prototype.loadUserEntitlements=function(e){var t=i.defer();return C._useMockServer&&(e.options=e.options||{},e.options.mockServerAPI=C._mockServerAPI),this.getUserEntitlements(e.relid,e.options,t),t.promise},t.prototype.start=function(e){e&&e.mockServerAPI&&(C._useMockServer=!0,C._mockServerAPI=e.mockServerAPI)},t.prototype.getUserProfile=function(e,t){C._userPromiseStatus===u.start?(C._userPromiseStatus=u.inprogress,C._promises=[t],this.resolveUserProfile(e)):C._userPromiseStatus===u.inprogress?C._promises[C._promises.length]=t:C._userPromiseStatus===u.success?t.resolve(this.buildUserProfileResponse()):t.reject({error:"Error while calling User API",isUserApiSuccess:v._isUserSuccess,isProxyApiSuccess:v._isProxySuccess,isEntitlementsApiSuccess:v._isEntitlementsSuccess})},t.prototype.buildUserProfileResponse=function(){return{user:this.getUser(),proxies:this.getProxies(),entitlements:this.getEntitlements(),CSRFToken:v._CSRFToken,isUserApiSuccess:v._isUserSuccess,isProxyApiSuccess:v._isProxySuccess,isEntitlementsApiSuccess:v._isEntitlementsSuccess}},t.prototype.resolveUserProfile=function(e){var t=this,n={relid:l};new i.Promise(r.bind((function(n,o){t.callProfileServices(e,n,o)}),this)).then(r.bind((function(){return this.loadDefaultProxyEntitlement(e,n)}),this)).then(r.bind((function(e){n.relid!==l&&(v._entitlements[n.relid]=o.userParser.parseEntitlements(e)),C._userPromiseStatus=u.success;for(var t=0,r=C._promises;t<r.length;t++)r[t].resolve(this.buildUserProfileResponse())}),this),(function(){C._userPromiseStatus=u.error;for(var e=0,t=C._promises;e<t.length;e++)t[e].reject({error:"Error while calling User API",isUserApiSuccess:v._isUserSuccess,isProxyApiSuccess:v._isProxySuccess,isEntitlementsApiSuccess:v._isEntitlementsSuccess})}))},t.prototype.loadDefaultProxyEntitlement=function(e,t){if(s.CookieManager.getProxyRelationshipCookie()&&v._userProfile.proxies){var n=r.findIndex(v._userProfile.proxies,(function(e){return e.relationshipID===s.CookieManager.getProxyRelationshipCookie()}));n>=0&&(t.relid=v._userProfile.proxies[n].relationshipID)}return t.relid!==l?g.get(t.relid,e):void 0},t.prototype.callUserService=function(e,t,n){C._hasUserProfile||i.all([f.get(e)]).then(r.bind((function(e){var n=e[0];v._userProfile=o.userParser.parseUser(n,l),C._hasUserProfile=!0,t()}),this)).catch(r.bind((function(e){console.log(e),C._hasUserProfile=!1,n()}),this))},t.prototype.callProfileServices=function(t,n,o){if(window.hasOwnProperty("jsonConfigs")&&jsonConfigs.global&&!e.isEmptyObject(jsonConfigs.global))if(jsonConfigs.feature&&!e.isEmptyObject(jsonConfigs.feature)){var s={global:h.get("global"),feature:h.get("feature")};i.hashSettled(s).then(r.bind((function(e){this.updateConfig(e),this.callUserProfileService(t,n,o)}),this)).catch(r.bind((function(e){console.log("Profile calls failed with the error "+e),o()}),this))}else h.get("global").then(r.bind((function(e){jsonConfigs.global.jsonHash!==e.jsonHash&&(jsonConfigs.global=e,this.publishUpdatedConfig()),console.log("Global config call successs")}),this)),console.log("%cfeature config does not exist","background: red; color: white"),o();else console.log("%cjsonConfigs does not exist or is missing global config","background: red; color: white"),o()},t.prototype.updateConfig=function(t){var n,o,r=t.global,i=t.feature;r.state===P?(r.value.hashCorrect||e.isEmptyObject(r.value)||(jsonConfigs.global=r.value,n=!0),console.log("Global config call successs")):console.log("Ajax called failed to get global config"),i.state===P?(i.value.hashCorrect||e.isEmptyObject(i.value)||(jsonConfigs.feature=i.value,o=!0),console.log("Feature config call successs")):console.log("Ajax called failed to get feature config"),(n||o)&&this.publishUpdatedConfig()},t.prototype.callUserProfileService=function(e,t,n){var o=jsonConfigs.global,r=window.location.href;"localhost"!==document.domain?"user"==o.userProfileFeature?this.callUserService(e,t,n):"useronly"==o.userProfileFeature||r.indexOf("/secure/")<0?this.callUserOnlyService(e,t,n):r.indexOf("/secure/")>-1&&this.callAllProfileServices(e,t,n):this.callAllProfileServices(e,t,n)},t.prototype.callAllProfileServices=function(e,t,n){if(!C._hasUserProfile){var s={user:f.get(e),proxies:d.get(e),entitlement:g.get(m,e)};i.hashSettled(s).then(r.bind((function(e){var r=e.user,i=e.proxies,s=e.entitlement;r.state===P?(v._CSRFToken=r.CSRFToken,i.state===P?(v._userProfile=o.userParser.parse(r.value,i.value),v._isProxySuccess=!0):(v._userProfile=o.userParser.parse(r.value,l),v._isProxySuccess=!1,a.logUtil.logError(y,a.logUtil.getRSVPLogMessage(i.reason,"Proxy API Call Failed"))),s.state===P?(v._entitlements[m]=o.userParser.parseEntitlements(s.value),v._isEntitlementsSuccess=!0):(v._isEntitlementsSuccess=!1,a.logUtil.logError(y,a.logUtil.getRSVPLogMessage(s.reason,"Entitlement API Call Failed"))),C._hasUserProfile=!0,v._isUserSuccess=!0,t()):(v._isUserSuccess=!1,a.logUtil.logError(y,a.logUtil.getRSVPLogMessage(r.reason,"User API Call Failed")),C._hasUserProfile=!1,n())}),this)).catch(r.bind((function(e){console.log(e),C._hasUserProfile=!1,v._isUserSuccess=!1,n()}),this))}},t.prototype.callUserOnlyService=function(e,t,n){if(!C._hasUserProfile){var s={user:f.get(e)};i.hashSettled(s).then(r.bind((function(e){var n=e.user;n.state===P?(v._CSRFToken=n.CSRFToken,v._userProfile=o.userParser.parse(n.value,l),C._hasUserProfile=!0):(a.logUtil.logError(y,a.logUtil.getRSVPLogMessage(n.reason,"User API Call Failed")),C._hasUserProfile=!1),t()}),this)).catch(r.bind((function(e){console.log(e),C._hasUserProfile=!1,n()}),this))}},t.prototype.getUser=function(){return v._userProfile?v._userProfile.user:{}},t.prototype.getEntitlements=function(){return v._entitlements},t.prototype.getProxies=function(){var e=[];return v._userProfile&&v._userProfile.proxies.length>0&&(e=e.concat(v._userProfile.proxies)),e},t.prototype.getUserEntitlements=function(t,n,o){t||(t=m),window.hasOwnProperty("jsonConfigs")&&jsonConfigs.global&&!e.isEmptyObject(jsonConfigs.global)?jsonConfigs.feature&&!e.isEmptyObject(jsonConfigs.feature)?(C._entitlementPromise[t]||(C._entitlementPromise[t]=new i.Promise(r.bind((function(e,n){this.fetchEntitlements(e,n,t)}),this))),C._entitlementPromise[t].then(r.bind((function(){o.resolve({relid:t,entitlements:v._entitlements[t]}),this.publishEntitlementChange(t,v._entitlements[t])}),this),(function(){o.reject({error:"Error while calling the Entitlement API"})}))):(console.log("%cfeature config does not exist","background: red; color: white"),o.reject({error:"Feature Config does not exist. Error while calling the Entitlement API"})):(console.log("%cjsonConfigs does not exist or is missing global config","background: red; color: white"),o.reject({error:"jsonConfigs does not exist. Error while calling the Entitlement API"}))},t.prototype.fetchEntitlements=function(e,t,n){v._entitlements[n]?e():g.get(n).then(r.bind((function(t){v._entitlements||(v._entitlements={}),v._entitlements[n]=o.userParser.parseEntitlements(t),e()}),this)).catch((function(e){t()}))},t.prototype.publishEntitlementChange=function(e,t){if(s.Communicator){var n=s.Communicator.ENUMS.TOPIC.CHANGE_ENTITLEMENTS,o=s.Communicator.ENUMS.CHANNEL.GLOBAL;s.Communicator.CHANNEL[o].publish(n,{data:{relid:e,entitlements:t}})}},t.prototype.publishUpdatedConfig=function(){if(s.Communicator){var e=s.Communicator.ENUMS.TOPIC.CONFIG_UPDATED,t=s.Communicator.ENUMS.CHANNEL.GLOBAL;s.Communicator.CHANNEL[t].publish(e,jsonConfigs)}},t}();n.userProfileServer=new x})),p("UserProfileClient",["require","exports","./UserProfileServer","rsvp","kp-client-commons"],(function(e,n,o,r,s){"use strict";var a={_userProfile:{},_entitlements:{}},c="self",u=function(){function e(){}return e.prototype.load=function(e){var n=this;return void 0===e&&(e={server:l}),e.server&&o.userProfileServer.start(),s.Communicator&&s.Communicator.CHANNEL[s.Communicator.ENUMS.CHANNEL.GLOBAL].subscribe(s.Communicator.ENUMS.TOPIC.CHANGE_ENTITLEMENTS,t.bind((function(e,t){n.updateEntitlements(e,t)}),this)),new r.Promise(t.bind((function(t,o){n.request(e,t,o)}),this))},e.prototype.request=function(e,n,r){var i=this;o.userProfileServer.loadUserProfile(e).then(t.bind((function(e){i.onSuccessRequest(e),i.dualChoice(e.user),i.pem(e.user),i.cafh(e.user),n(e)}),this),(function(e){console.log(e.error),r(e)}))},e.prototype.onSuccessRequest=function(e){a._userProfile.user=e.user,a._userProfile.proxies=e.proxies,a._entitlements=e.entitlements},e.prototype.pem=function(e){"PEM"===e.roleType&&this.analytics(e.guid,"pemanalytics","businessLine",{businessLine:"pre-effective member"})},e.prototype.cafh=function(e){e.isCAFH&&this.analytics(e.guid,"cafhanalytics","businessLine",{businessLine:"care away from home"})},e.prototype.dualChoice=function(e){"Y"===e.hasDualChoicePlan&&this.analytics(e.guid,"dualchoiceanalytics","businessLine",{businessLine:"dual choice"})},e.prototype.analytics=function(e,t,n,o){var r="kpcampaign",s=i.get(r),a=s?JSON.parse(s):{};a[e]=a[e]||[];var l=a[e];-1===l.indexOf(t)&&(_satellite&&_satellite.kpCustomEvent&&(console.log("_satellite.kpCustomEvent",n,o),_satellite.kpCustomEvent(n,o)),l.push(t),i.set(r,JSON.stringify(a)))},e.prototype.getUser=function(){return a._userProfile?a._userProfile.user:{}},e.prototype.getProxies=function(){var e=[];return a._userProfile&&a._userProfile.proxies.length>0&&(e=e.concat(a._userProfile.proxies)),e},e.prototype.getSelectedProxy=function(){return(a._userProfile&&a._userProfile.proxies||[]).find((function(e){return e.relationshipID===s.CookieManager.getProxyRelationshipCookie()}))},e.prototype.getEntitlements=function(e){return void 0===e&&(e=l),e&&e!==c?a._entitlements[e]:a._entitlements[c]},e.prototype.fetchEntitlements=function(e){var n=this;return void 0===e&&(e=l),e=e||s.CookieManager.getProxyRelationshipCookie()||c,new r.Promise(t.bind((function(t,o){n.requestEntitlements(e,t,o)}),this))},e.prototype.updateEntitlements=function(e,t){a._entitlements[e.relid]=e.entitlements},e.prototype.requestEntitlements=function(e,n,r){var i=this;a._entitlements[e]?n({entitlements:a._entitlements[e]}):o.userProfileServer.loadUserEntitlements({relid:e}).then(t.bind((function(t){i.onSuccessEntitlementRequest(e,t),n({relid:e,entitlements:a._entitlements[e]})}),this),(function(e){console.log("Uh oh! Error: "+e.error),r()}))},e.prototype.onSuccessEntitlementRequest=function(e,t){e||(e=c),a._entitlements[e]=t.entitlements},e.prototype.hasEntitlement=function(e,t){if(void 0===t&&(t=c),!e)throw new Error("EntitlementId is mandatory");var n=a._entitlements[t];if(!n)throw new Error("Entitlement is not available for the relid.Call getEntitlements to fetch the entitlements before checking for entitlements for a feature");return!!n[e]&&n[e]},e.prototype.hasEntitlementForCurrentUser=function(e){var t=s.CookieManager.getProxyRelationshipCookie();return this.isValidProxy(t)?this.hasEntitlement(e,t):this.hasEntitlement(e,c)},e.prototype.isValidProxy=function(e){if(e===c)return!1;var t=!1,n=this.getProxies();if(n)for(var o=0,r=n;o<r.length;o++)if(r[o].relationshipID===e){t=!0;break}return t},e}();n.userProfileClient=new u})),p("jquery",(function(){return e})),p("lodash",(function(){return t})),p("rsvp",(function(){return n})),p("postal",(function(){return o})),p("postal.request-response",(function(){return o})),p("js-cookie",(function(){return i})),p("kp-client-commons",(function(){return $kp.KPClientCommons})),{UserProfileServer:u("UserProfileServer").userProfileServer,UserProfileClient:u("UserProfileClient").userProfileClient}}(e,t,n,o,0,s)),i.$kp.KPUserProfile}.apply(t,o))||(e.exports=r)},995:function(e,t,n){(function(t){t.$kp||(t.$kp={}),e.exports=t.$kp.KPProxyPicker=n(996)}).call(this,n(39))},996:function(e,t,n){var o,r,i;(i=this).$kp=i.$kp||{},o=[n(1),n(87),n(135),n(55),n(55),n(90),n(80),n(201)],void 0===(r=function(e,t,n,o,r,s,a,l){return i.$kp.KPProxyPicker||(i.$kp.KPProxyPicker=function(e,t,n,o,r,i,s,a,l,c){var u,p,f;return function(e){function t(e,t){return x.call(e,t)}function n(e,t){var n,o,r,i,s,a,l,c,u,p,f,d=t&&t.split("/"),g=v.map,h=g&&g["*"]||{};if(e){for(s=(e=e.split("/")).length-1,v.nodeIdCompat&&I.test(e[s])&&(e[s]=e[s].replace(I,"")),"."===e[0].charAt(0)&&d&&(e=d.slice(0,d.length-1).concat(e)),u=0;u<e.length;u++)if("."===(f=e[u]))e.splice(u,1),u-=1;else if(".."===f){if(0===u||1===u&&".."===e[2]||".."===e[u-1])continue;u>0&&(e.splice(u-1,2),u-=2)}e=e.join("/")}if((d||h)&&g){for(u=(n=e.split("/")).length;u>0;u-=1){if(o=n.slice(0,u).join("/"),d)for(p=d.length;p>0;p-=1)if((r=g[d.slice(0,p).join("/")])&&(r=r[o])){i=r,a=u;break}if(i)break;!l&&h&&h[o]&&(l=h[o],c=u)}!i&&l&&(i=l,a=c),i&&(n.splice(0,a,i),e=n.join("/"))}return e}function o(t,n){return function(){var o=_.call(arguments,0);return"string"!=typeof o[0]&&1===o.length&&o.push(null),g.apply(e,o.concat([t,n]))}}function r(e){return function(t){y[e]=t}}function i(n){if(t(P,n)){var o=P[n];delete P[n],C[n]=!0,d.apply(e,o)}if(!t(y,n)&&!t(C,n))throw new Error("No "+n);return y[n]}function s(e){var t,n=e?e.indexOf("!"):-1;return n>-1&&(t=e.substring(0,n),e=e.substring(n+1,e.length)),[t,e]}function a(e){return e?s(e):[]}function l(e){return function(){return v&&v.config&&v.config[e]||{}}}var d,g,h,m,y={},P={},v={},C={},x=Object.prototype.hasOwnProperty,_=[].slice,I=/\.js$/;h=function(e,t){var o,r=s(e),a=r[0],l=t[1];return e=r[1],a&&(o=i(a=n(a,l))),a?e=o&&o.normalize?o.normalize(e,function(e){return function(t){return n(t,e)}}(l)):n(e,l):(a=(r=s(e=n(e,l)))[0],e=r[1],a&&(o=i(a))),{f:a?a+"!"+e:e,n:e,pr:a,p:o}},m={require:function(e){return o(e)},exports:function(e){var t=y[e];return void 0!==t?t:y[e]={}},module:function(e){return{id:e,uri:"",exports:y[e],config:l(e)}}},d=function(n,s,l,u){var p,f,d,g,v,x,_,I=[],b=typeof l;if(x=a(u=u||n),"undefined"===b||"function"===b){for(s=!s.length&&l.length?["require","exports","module"]:s,v=0;v<s.length;v+=1)if("require"===(f=(g=h(s[v],x)).f))I[v]=m.require(n);else if("exports"===f)I[v]=m.exports(n),_=!0;else if("module"===f)p=I[v]=m.module(n);else if(t(y,f)||t(P,f)||t(C,f))I[v]=i(f);else{if(!g.p)throw new Error(n+" missing "+f);g.p.load(g.n,o(u,!0),r(f),{}),I[v]=y[f]}d=l?l.apply(y[n],I):c,n&&(p&&p.exports!==e&&p.exports!==y[n]?y[n]=p.exports:d===e&&_||(y[n]=d))}else n&&(y[n]=l)},u=p=g=function(t,n,o,r,s){if("string"==typeof t)return m[t]?m[t](n):i(h(t,a(n)).f);if(!t.splice){if((v=t).deps&&g(v.deps,v.callback),!n)return;n.splice?(t=n,n=o,o=null):t=e}return n=n||function(){},"function"==typeof o&&(o=r,r=s),r?d(e,t,n,o):setTimeout((function(){d(e,t,n,o)}),4),g},g.config=function(e){return g(e)},u._defined=y,(f=function(e,n,o){if("string"!=typeof e)throw new Error("See almond README: incorrect module build, no module name");n.splice||(o=n,n=[]),t(y,e)||t(P,e)||(P[e]=[e,n,o])}).amd={jQuery:!0}}(),f("almond",(function(){})),f("Services/AuditLogService",["require","exports","jquery","kp-client-commons","rsvp"],(function(e,t,n,o,r){"use strict";var i=function(){function e(){}return e.prototype.post=function(e){var t=jsonConfigs;e=JSON.stringify(e);var i={"Content-Type":"application/json","X-RelId":o.CookieManager.getProxyRelationshipCookie()},s=t.global.auditServiceUrl,a={apiKey:t.feature.xIbmClientId,appName:t.feature.appName,componentName:t.global.proxyComponentName,useragentcategory:"Desktop",putSesionToken:!0,headers:i};return new r.Promise((function(t,r){n.ajax(s,{type:"POST",headers:o.AjaxUtil.getDTOAPIHeaders(a),data:e,success:function(e){t(e)},xhrFields:{withCredentials:!0},error:function(e,t,n){r({httpResponse:{code:e.status,message:n}})}})}))},e}();Object.defineProperty(t,"__esModule",{value:!0}),t.default=i})),f("Services/CreateProxyOnlyService",["require","exports","jquery","kp-client-commons","rsvp"],(function(e,t,n,o,r){"use strict";var i=function(){function e(){}return e.prototype.post=function(e){var t=jsonConfigs,i=t.global.apiUrl+t.global.createProxyApiUri+"?relId="+e,s={apiKey:t.feature.apiKey,appName:t.feature.appName,componentName:t.global.proxyComponentName,osversion:"linux",useragenttype:"chrome",useragentcategory:"W",putSesionToken:!0,headers:{"X-encryption":"true","Content-Type":"application/json"}};return new r.Promise((function(e,t){n.ajax(i,{type:"POST",async:!0,headers:o.AjaxUtil.getDTOAPIHeaders(s),xhrFields:{withCredentials:!0},crossDomain:!0,success:function(t){e(t)},error:function(e,n,o){t({httpResponse:{code:e.status,message:o}})}})}))},e}();Object.defineProperty(t,"__esModule",{value:!0}),t.default=i})),f("ProxyPickerWidget",["require","exports","jquery","lodash","rsvp","kp-client-commons","kp-user-profile","./Services/AuditLogService","./Services/CreateProxyOnlyService","js-cookie"],(function(e,t,n,o,r,i,s,a,l,u){"use strict";var p="fulfilled",f=function(){},d=101,g=102,h=103,m=function(){function e(){}return e.prototype.render=function(e){var t=new f;if(t._readOnly=e.readOnly||!1,t._selectedProxy={relationshipID:i.CookieManager.getProxyRelationshipCookie()},t._onChangeTopic=e.onChangeTopic||i.Communicator.ENUMS.TOPIC.PROXY_PICKER,o.bindAll(this,"expandCollapseProxy","changeMember"),!e.selector)throw new Error("Selector for proxy picker is not defined");return this.$proxyContainerSelector=t._selector=e.selector,t._proxyVersion=e.proxyVersion||1,t._pattern=e.pattern,t._patternInit=e.patternInit,t._dropDownPatternInit=e.dropDownPatternInit,t._patternDataSetup=e.patternDataSetup,this.getUpdatedConfig(),e.data?(t._user={isMember:!0},t._members=e.data,this.renderTemplate(e.data,t),this.bindEvents(e.data,t),t):void s.UserProfileClient.load().then(o.bind((function(e){if(e&&e.isProxyApiSuccess){var n=this.getMemberList(t);this.renderTemplate(n,t),this.bindEvents(n,t)}else this.renderErrorTemplate(t)}),this),(function(e){console.log(e)}))},e.prototype.renderTemplate=function(e,t){var r=n(t._selector);if(t._pattern){var i=this.serializeData(e,t);if(2===t._proxyVersion){t.$el=n('<div class="drop-menu-pattern" data-menu-type="proxy">\n\t\t\t\t\t<div class="drop-menu">\n\t\t\t\t\t\t<label class="drop-menu-label">\n\t\t\t\t\t\t\t<span class="drop-menu-label-text">Viewing Member</span>\n\t\t\t\t\t\t</label>\n\t\t\t\t\t\t<button class="drop-menu-dropdown" id="drop-menu-dropdown" data-analytics-click="proxy picker dropdown" data-analytics-location="expand" aria-expanded="false" aria-haspopup="true">\n\t\t\t\t\t\t\t<img class="drop-menu-button-img" src="/etc.clientlibs/settings/wcm/designs/kporg/kp-foundation/clientlib-modules/styleguide/resources/assets/icons/people.svg" alt=""/>\n\t\t\t\t\t\t\t<span class="drop-menu-button-text">'+i.selectedProxyName+'</span>\n\t\t\t\t\t\t\t<img class="drop-down-menu-chevron" src="/etc.clientlibs/settings/wcm/designs/kporg/kp-foundation/clientlib-modules/styleguide/resources/assets/icons/chevrondown.svg" alt=""/>\n\t\t\t\t\t\t</button>\n\t\t\t\t\t\t<ul class="drop-menu-list" data-analytics-location="Proxy Picker" role="menu"></ul>\n\t\t\t\t</div>\n\t\t\t</div>'),r.html(t.$el);var s={pickerData:this.getProxiesData(t),type:"proxy",sort:"false",assetsSrc:"/etc.clientlibs/settings/wcm/designs/kporg/kp-foundation/clientlib-modules/styleguide/resources/images/"};t._dropDownPatternInit&&t._dropDownPatternInit(t._selector),t._patternDataSetup&&t._patternDataSetup(s)}else{t.$el=n('<div class="navigational-picker proxy-picker">\n\t\t\t\t<div class="proxyPicker">\n\t\t\t\t\t<button data-analytics-click="proxy picker dropdown" data-analytics-location="expand" aria-expanded="false" aria-haspopup="listbox" class="navigational-select-dropdown">\n\t\t\t\t\t    <span class="screenreader-only">'+i.screenreaderText+'</span>\n\t\t\t\t\t\t<span class="proxy-select-dropdown-value">'+i.selectedProxyName+'</span>\n\t\t\t\t\t\t<span class="screenreader-only">'+i.screenreaderTextSelected+'</span>\n\t\t\t\t\t\t<i aria-hidden="true" class="icon-chevron-down"></i>\n\t\t\t\t\t</button>\n\t\t\t\t\t<ul class="navigational-select-dropdown__list" data-analytics-location="selector" role="listbox">\n\t\t\t\t\t</ul>\n\t\t\t\t</div>\n\t\t\t</div>'),r.html(t.$el);var a=n(".navigational-select-dropdown__list",r);i.proxies.forEach((function(e){a.append('\n\t\t\t\t<li aria-selected="false" class="navigational-select-value proxy-select-value" data-id="'+e.relationshipID+'" data-value="'+e.name+'" role="option" tabindex="-1">\n\t\t\t\t\t<a data-analytics-click="'+e.relation+'" data-analytics-type="link" href="#">'+e.name+"</a>\n\t\t\t\t</li>")})),t._patternInit&&t._patternInit(t._selector)}}else{var l=o.template('\n\t\t\t<div>\n\t\t\t\t<div class="family-selector" id="proxy-members">\n\t\t\t\t\t<div class="proxy-select-dropdown">\n\t\t\t    \t<div class="dropdown-overlay" aria-hidden="true">\n\t\t\t      \t<span id="proxy-selector" class="select-value" aria-hidden="true"><%= selectedProxyName %></span> <i class="icon-chevron-down" aria-hidden="true"></i>\n\t\t\t      </div>\n\t\t\t      <select id="proxy-picker-select-dropdown" data-analytics-click="proxy picker dropdown" class="form" role="listbox" aria-label="<%= screenreaderText %>">\n\t\t\t\t\t\t\t<% _.forEach(proxies, function(proxy) { %>\n\t\t\t\t\t\t\t\t<option class="-options" data-id="<%= proxy.relationshipID %>" value="<%= proxy.name %>"><%= proxy.name %></option>\n\t\t\t\t\t\t\t<% }); %>\n\t\t\t      </select>\n\t\t\t  \t</div>\n\t\t\t\t</div>\n      \t\t</div>');t.$el=n(l(this.serializeData(e,t))),r.html(t.$el),t.$proxy_select_dropdown=t.$el.find(".proxy-select-dropdown"),t.$proxy_selector=t.$el.find("#proxy-selector"),t.$el.find("#proxy-picker-select-dropdown").val(t._selectedProxy.name)}this.showMember(e,t)},e.prototype.getProxiesData=function(e){var t=new Array;if(e._members){if(e._selectedProxy.relationshipID&&e._selectedProxy)for(var n=0,o=e._members;n<o.length;n++){var r=o[n];e._selectedProxy.relationshipID===r.relationshipID?r.selected=!0:r.selected=!1,r.isProxy=!0,t.push(r)}else for(var i=0,s=e._members;i<s.length;i++)"self"===(r=s[i]).relation?r.selected=!0:r.selected=!1,r.isProxy=!0,t.push(r);e._proxyMembers=t}return t},e.prototype.showMember=function(e,t){!this.checkProxyDisplayAccess(t)||e.length<2?(t.$el.hide(),i.AnalyticsUtil.setAnalyticsInfo([{dtmObject:"global",dtmAttribute:"proxySubjectCount",dtmValue:0}])):this.bindSelectEvents(t)},e.prototype.bindEvents=function(e,t){var n=this;t._pattern?document.addEventListener("DropMenuComponent.selectOption",(function(e){e.detail&&e.detail.dataset&&e.detail.dataset.isProxy&&n.changeDDPatternMember(e,t)})):(t.$proxy_selector.on("click",(function(e){n.expandCollapseProxy(e,t)})),console.log("DS1 Poxy picker Audit API called..."),this.callProxyChangeApis(t),t.$el.find("#proxy-picker-select-dropdown").on("change",(function(e){n.changeMember(e,t)})))},e.prototype.bindSelectEvents=function(e){if(e._pattern){var t=this;n("ul.navigational-select-dropdown__list",e.$el).on("click keydown",(function(n){t.changeMember(n,e)}))}else{var o=e.$el.find(".proxy-select-dropdown"),r=o.find("select"),i=o.find(".select-value");r.on({"change keyup":function(){var e=r.find("option:selected").val();i.text(e)},focus:function(){o.addClass("focus")},blur:function(){o.removeClass("focus")}})}},e.prototype.expandCollapseProxy=function(e,t){t.$proxy_select_dropdown.toggleClass("-open"),t.$proxy_select_dropdown.hasClass("-open")?t.$el.find(".-options").removeAttr("aria-hidden"):t.$el.find(".-options").attr("aria-hidden","true")},e.prototype.changeMember=function(e,t){if(e.preventDefault(),t._pattern){if(1!==e.which&&13!==e.which&&32!==e.which)return;t._selectedProxy=t._members.find((function(t){return t.relationshipID===n(e.target).closest("li").data("id")}))}else{var r=n(".-options:selected",n(e.currentTarget));t._selectedProxy=o.find(t._members,{relationshipID:r.attr("data-id")})}t._selectedProxy&&(t._pattern||(t.$proxy_selector.html(t._selectedProxy.name),t.$proxy_select_dropdown.toggleClass("-open")),t._readOnly?this.publishSelectedMember(c,c,t):(this.setProxyRelationshipCookie(t._selectedProxy.relationshipID),this.callProxyChangeApis(t),this.setAnalyticsInfo(t)))},e.prototype.changeDDPatternMember=function(e,t){e.preventDefault(),t._selectedProxy=e.detail.dataset,t._selectedProxy&&(t._readOnly?this.publishSelectedMember(c,c,t):(this.setProxyRelationshipCookie(t._selectedProxy.relationshipID),this.callProxyChangeApis(t),this.setAnalyticsInfo(t)))},e.prototype.renderErrorTemplate=function(e){var t=this,o=n("#proxy-error-placeholder-id").data("uri");n.getJSON(o).done((function(n){return t.showError(n,e)})).fail((function(){return t.showError(null,e)}))},e.prototype.verifyErrorMessages=function(e){var t="es-US"===u.get("kpLanguage");(e=e||{}).message||(e.message=t?"Lo sentimos, pero no podemos completar su solicitud en este momento. Inténtelo de nuevo más tarde.":"We’re sorry, but we’re unable to complete your request right now. Please try again later."),e.adaMessage||(e.adaMessage=t?"Alerta de error del sistema: la selección de miembro no está disponible":"System error alert, member selection unavailable")},e.prototype.showError=function(e,t){if(this.verifyErrorMessages(e),t._pattern)2===t._proxyVersion?$kp.GS.NotificationComponent.showNotification({type:"error",msgBody:e.message,alertText:e.adaMessage,tag:"proxy"}):$kp.GS.NotificationComponent.showNotification({type:"system-error",msgBody:e.message,alertText:e.adaMessage,tag:"proxy"});else{var r=o.template('\n\t\t\t<div>\n\t\t\t\t<div class="notification -system-error">\n\t\t\t\t<div class="-main">\n\t\t\t\t\t\t<div class="screenreader-only" role="alert" aria-live="assertive">System error alert, proxy picker unavailable</div>\n\t\t\t\t\t\t<div class="-icon" aria-hidden="true"></div>\n\t\t\t\t\t\t<span class="screenreader-only">system error alert icon</span>\n\t\t\t\t\t<div class="-body">\n\t\t\t\t\t\t<%= message %>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</div>');t.$el=n(r(e)),n(t._selector).html(t.$el),n("#proxy-picker-error").focus()}},e.prototype.getUpdatedConfig=function(){if(i.Communicator){var e=i.Communicator.ENUMS.TOPIC.CONFIG_UPDATED,t=i.Communicator.ENUMS.CHANNEL.GLOBAL;i.Communicator.CHANNEL[t].subscribe(e,(function(e,t){e&&(jsonConfigs=e,console.log("configTopic subscribe event.Config updated in Proxy Picker Library"),console.log(jsonConfigs))}))}},e.prototype.getMemberList=function(e){var t=new Array;if(e._user=s.UserProfileClient.getUser(),e._proxies=s.UserProfileClient.getProxies(),e._user&&t.push({name:e._user.name,relationshipID:"self",relation:"self"}),e._proxies){for(var n=0,o=e._proxies;n<o.length;n++){var r=o[n];t.push({name:r.name,relationshipID:r.relationshipID,relation:r.relation,encryptedMrn:r.id,deploymentId:r.deploymentId,status:r.status})}e._members=t}return t},e.prototype.checkProxyDisplayAccess=function(e){var t=!1,n=s.UserProfileClient.getEntitlements("self");return e._user.isMember?n&&n[108]&&n[150]&&(t=!0):t=!0,t},e.prototype.callProxyChangeApis=function(e){var t=this;if(window.hasOwnProperty("jsonConfigs")&&jsonConfigs.global&&!n.isEmptyObject(jsonConfigs.global))if(jsonConfigs.feature&&!n.isEmptyObject(jsonConfigs.feature)){var i={featureName:"Proxy",txTypeCode:"CONTEXT_SWITCH",txResultCode:"Successful",componentName:"Proxy",txReason:"self"===e._selectedProxy.relationshipID?"Switch to Self Mode":"Switch to Proxy Mode",appName:jsonConfigs.feature.appName};new r.Promise(o.bind((function(n,o){t.callAllProxyChangeApis(n,o,e),t.callAuditApi(i,n,o)}),this),(function(e){console.log("Apis failed while changing proxies")}))}else console.log("%cfeature config does not exist","background: red; color: white");else console.log("%cjsonConfigs does not exist or is missing global config","background: red; color: white")},e.prototype.callAuditApi=function(e,t,n){(new a.default).post(e).then(o.bind((function(e){console.log("Audit Log Posted successfully"),t()}),this),(function(e){if(i.Communicator){var t=i.Communicator.ENUMS.TOPIC.PROXY_AUDIT_API_ERROR,o=i.Communicator.ENUMS.CHANNEL.GLOBAL;i.Communicator.CHANNEL[o].publish(t,{errorCode:h,errorMsg:"Audit API failed when changing proxies"})}n()}))},e.prototype.callAllProxyChangeApis=function(e,t,n){var i,a,c=new l.default,u=s.UserProfileClient.fetchEntitlements(n._selectedProxy.relationshipID);"self"!==n._selectedProxy.relationshipID&&"Inactive"===n._selectedProxy.status?(i=[u,c.post(n._selectedProxy.relationshipID)],a=!0):i=[u],r.allSettled(i).then(o.bind((function(o){var r,i=[];o[0].state===p?(r=o[0].value.entitlements,e()):(console.log("Entitlements API failed while changing proxies"),i.push(d),t()),a&&(o[1].state===p?(n._selectedProxy.status="Active",console.log("Created ProxyOnly account successfully"),e()):(i.push(g),console.log("CreateProxy API failed while changing proxies"),t())),this.publishSelectedMember(i,r,n)}),this)).catch(o.bind((function(e){console.log(e),console.log("Apis failed when changing proxies"),t()}),this))},e.prototype.setAnalyticsInfo=function(e){var t=[{dtmObject:"global",dtmAttribute:"proxySwitch",dtmValue:"self"===e._selectedProxy.relationshipID?"subject_to_self":"self_to_subject"},{dtmObject:"global",dtmAttribute:"proxyRelationshipID",dtmValue:e._selectedProxy.relationshipID}];i.AnalyticsUtil.setAnalyticsInfo(t)},e.prototype.publishSelectedMember=function(e,t,n){if(i.Communicator&&n){var o=i.Communicator.ENUMS.CHANNEL.GLOBAL;i.Communicator.CHANNEL[o].publish(n._onChangeTopic,{relid:n._selectedProxy.relationshipID,entitlements:t,error:e})}},e.prototype.setProxyRelationshipCookie=function(e){i.CookieManager.setProxyRelationshipCookie(e)},e.prototype.serializeData=function(e,t){var n,r,i="";return e.length>0&&(t._selectedProxy.relationshipID&&(t._selectedProxy=o.find(e,{relationshipID:t._selectedProxy.relationshipID})),t._selectedProxy&&t._selectedProxy.relationshipID||(t._selectedProxy=e[0]),i=t._selectedProxy.name,this.setProxyRelationshipCookie(t._selectedProxy.relationshipID)),"es-US"===u.get("kpLanguage")?(n="Ver miembro",r="Actualmente seleccionado"):(n="Viewing member",r="Currently selected"),{proxies:e,selectedProxyName:i,screenreaderText:n,screenreaderTextSelected:r}},e.prototype.renderNotification=function(e,t,o){if(void 0===o&&(o="information"),!e||!t)throw new Error("Please provide a title and message to renderNotification()");var r=n('<div class="notification -'+("success"===o?"success-notification":("error"===o?"hard":"soft")+"-interruption")+'" data-analytics-location="Notification">\n\t\t<div class="-main">\n\t\t  <span id="msg_info1" tabindex="-1" class="screenreader-only">'+(o.charAt(0).toUpperCase()+o.slice(1))+'</span>\n\t\t  <div class="-icon"></div>\n\t\t  <div class="-body">\n\t\t\t<p class="styling-6 -medium">'+e+"</p>\n\t\t\t<p>"+t+"</p>\n\t\t  </div>\n\t\t</div>\n\t  </div>");return n(this.$proxyContainerSelector).children().length?n(this.$proxyContainerSelector).append(r):n(this.$proxyContainerSelector).empty().append(r),r},e}();t.proxyPickerWidget=new m})),f("ProxyPickerClient",["require","exports","kp-client-commons"],(function(e,t,n){"use strict";var o=function(){function e(){}return e.prototype.onChange=function(e){if(n.Communicator){var t=n.Communicator.ENUMS.TOPIC.PROXY_PICKER,o=n.Communicator.ENUMS.TOPIC.PROXY_AUDIT_API_ERROR,r=n.Communicator.ENUMS.CHANNEL.GLOBAL;n.Communicator.CHANNEL[r].subscribe(t,(function(t,n){e&&e(t)})),n.Communicator.CHANNEL[r].subscribe(o,(function(e,t){e&&e.errorCode&&103===e.errorCode&&console.log(e.errorMsg)}))}},e.prototype.isProxySelected=function(){var e=n.CookieManager.getProxyRelationshipCookie();return!(!e||"self"===e)},e.prototype.getRelationshipId=function(){var e=n.CookieManager.getProxyRelationshipCookie();return e||"self"},e}();t.proxyPickerClient=new o})),f("jquery",(function(){return e})),f("lodash",(function(){return t})),f("rsvp",(function(){return n})),f("postal",(function(){return o})),f("postal.request-response",(function(){return o})),f("js-cookie",(function(){return i})),f("kp-client-commons",(function(){return $kp.KPClientCommons})),f("kp-user-profile",(function(){return $kp.KPUserProfile})),{ProxyPickerWidget:p("ProxyPickerWidget").proxyPickerWidget,ProxyPickerClient:p("ProxyPickerClient").proxyPickerClient}}(e,t,n,o,0,s)),i.$kp.KPProxyPicker}.apply(t,o))||(e.exports=r)},997:function(e,t,n){(function(t){t.$kp||(t.$kp={}),e.exports=t.$kp.KPDynamicLinkList=n(998)}).call(this,n(39))},998:function(e,t,n){var o,r,i;(i=this).$kp=i.$kp||{},o=[n(1),n(87),n(135),n(55),n(55),n(90),n(80),n(201),n(251)],void 0===(r=function(e,t,n,o,r,s,a,l,c){return i.$kp.KPDynamicLinkList||(i.$kp.KPDynamicLinkList=function(e,t,n,o,r,i,s,a,l,c,u){var p,f,d;return function(e){function t(e,t){return C.call(e,t)}function n(e,t){var n,o,r,i,s,a,l,c,u,p,f,d=t&&t.split("/"),g=P.map,h=g&&g["*"]||{};if(e&&"."===e.charAt(0))if(t){for(s=(e=e.split("/")).length-1,P.nodeIdCompat&&_.test(e[s])&&(e[s]=e[s].replace(_,"")),e=d.slice(0,d.length-1).concat(e),u=0;u<e.length;u+=1)if("."===(f=e[u]))e.splice(u,1),u-=1;else if(".."===f){if(1===u&&(".."===e[2]||".."===e[0]))break;u>0&&(e.splice(u-1,2),u-=2)}e=e.join("/")}else 0===e.indexOf("./")&&(e=e.substring(2));if((d||h)&&g){for(u=(n=e.split("/")).length;u>0;u-=1){if(o=n.slice(0,u).join("/"),d)for(p=d.length;p>0;p-=1)if((r=g[d.slice(0,p).join("/")])&&(r=r[o])){i=r,a=u;break}if(i)break;!l&&h&&h[o]&&(l=h[o],c=u)}!i&&l&&(i=l,a=c),i&&(n.splice(0,a,i),e=n.join("/"))}return e}function o(t,n){return function(){var o=x.call(arguments,0);return"string"!=typeof o[0]&&1===o.length&&o.push(null),c.apply(e,o.concat([t,n]))}}function r(e){return function(t){m[e]=t}}function i(n){if(t(y,n)){var o=y[n];delete y[n],v[n]=!0,l.apply(e,o)}if(!t(m,n)&&!t(v,n))throw new Error("No "+n);return m[n]}function s(e){var t,n=e?e.indexOf("!"):-1;return n>-1&&(t=e.substring(0,n),e=e.substring(n+1,e.length)),[t,e]}function a(e){return function(){return P&&P.config&&P.config[e]||{}}}var l,c,g,h,m={},y={},P={},v={},C=Object.prototype.hasOwnProperty,x=[].slice,_=/\.js$/;g=function(e,t){var o,r=s(e),a=r[0];return e=r[1],a&&(o=i(a=n(a,t))),a?e=o&&o.normalize?o.normalize(e,function(e){return function(t){return n(t,e)}}(t)):n(e,t):(a=(r=s(e=n(e,t)))[0],e=r[1],a&&(o=i(a))),{f:a?a+"!"+e:e,n:e,pr:a,p:o}},h={require:function(e){return o(e)},exports:function(e){var t=m[e];return void 0!==t?t:m[e]={}},module:function(e){return{id:e,uri:"",exports:m[e],config:a(e)}}},l=function(n,s,a,l){var c,p,f,d,P,C,x=[],_=typeof a;if(l=l||n,"undefined"===_||"function"===_){for(s=!s.length&&a.length?["require","exports","module"]:s,P=0;P<s.length;P+=1)if("require"===(p=(d=g(s[P],l)).f))x[P]=h.require(n);else if("exports"===p)x[P]=h.exports(n),C=!0;else if("module"===p)c=x[P]=h.module(n);else if(t(m,p)||t(y,p)||t(v,p))x[P]=i(p);else{if(!d.p)throw new Error(n+" missing "+p);d.p.load(d.n,o(l,!0),r(p),{}),x[P]=m[p]}f=a?a.apply(m[n],x):u,n&&(c&&c.exports!==e&&c.exports!==m[n]?m[n]=c.exports:f===e&&C||(m[n]=f))}else n&&(m[n]=a)},p=f=c=function(t,n,o,r,s){if("string"==typeof t)return h[t]?h[t](n):i(g(t,n).f);if(!t.splice){if((P=t).deps&&c(P.deps,P.callback),!n)return;n.splice?(t=n,n=o,o=null):t=e}return n=n||function(){},"function"==typeof o&&(o=r,r=s),r?l(e,t,n,o):setTimeout((function(){l(e,t,n,o)}),4),c},c.config=function(e){return c(e)},p._defined=m,(d=function(e,n,o){if("string"!=typeof e)throw new Error("See almond README: incorrect module build, no module name");n.splice||(o=n,n=[]),t(m,e)||t(y,e)||(y[e]=[e,n,o])}).amd={jQuery:!0}}(),d("almond",(function(){})),d("KPDynamicLinkList",["require","exports","jquery","lodash"],(function(e,t,n,o){"use strict";var r=function(){function e(){console.log("KPDynamicLinkList created")}return e.prototype.init=function(e){this.getFilteredEntitlements(e);var t=this;window.$kp.KPProxyPicker.ProxyPickerClient.onChange((function(n){t.getFilteredEntitlements(e)}))},e.prototype.getFilteredEntitlements=function(e){var t=this.getUrlList(e),r=window.jsonConfigs.feature.dynamiclinklist.entitlements,i=o.merge(t,this.flattenObject(r)),s=window.$kp.KPUserProfile.UserProfileClient,a=0;s.load().then((function(r){n(e).hide(),n(".dllLoadingIndicator").show(),o.each(i,(function(o,r){var i=!0;o&&(i=s.hasEntitlementForCurrentUser(o));var l=n(e+" a[href='"+r+"']");t[r]?i?l.parent().show():l.parent().hide():l.parent().show(),i&&a++})),a>0?n(e).show():n(e).hide(),n(".dllLoadingIndicator").hide()}),(function(e){console.log("Dynamic link list: KPUserProfile's API Failed")}))},e.prototype.createDynamicLinks=function(){var t=n(e.jsDllComp);t&&n(t).each((function(t,o){var r=n(o).children(e.jsDllList);if(r){var i=n(r).attr(e.attrLinkType),s=n(r).attr(e.attrLinkId);if(i&&i==e.valLinkType){if(!s)return;n(r).empty();var a=window.kp.dll[s];a&&a.length>0&&n(a).each((function(e){var t;a[e]&&a[e].title&&(t=a[e].href?a[e].target?"<li><a href='"+a[e].href+"' target='"+a[e].target+"'>"+a[e].title+"</a></li>":"<li><a href='"+a[e].href+"'>"+a[e].title+"</a></li>":"<li>"+a[e].title+"</li>",n(r).append(t))}))}}}))},e.prototype.getUrlList=function(e){var t,o=n(e+" a"),r={};return n.each(o,(function(e,n){t=n.href&&n.href.replace(window.location.origin,""),r[t]=""})),r},e.prototype.flattenObject=function(e){var t={};for(var n in e)if(e.hasOwnProperty(n))if("object"==typeof e[n]){var o=this.flattenObject(e[n]);for(var r in o)o.hasOwnProperty(r)&&(t[o[r]]=n)}else t[n]=e[n];return t},e.jsDllComp=".js-dynamic-link-comp",e.jsDllList=".js-dynamic-link-list",e.attrLinkType="data-links-type",e.attrLinkId="data-links-id",e.valLinkType="dynamic",e}();t.kpDynamicLinkList=new r})),d("jquery",(function(){return e})),d("lodash",(function(){return t})),d("rsvp",(function(){return n})),d("postal",(function(){return o})),d("postal.request-response",(function(){return o})),d("js-cookie",(function(){return i})),d("kp-client-commons",(function(){return $kp.KPClientCommons})),d("kp-user-profile",(function(){return $kp.KPUserProfile})),d("kp-proxy-picker",(function(){return $kp.KPProxyPicker})),{KPDynamicLinkList:f("KPDynamicLinkList")}}(e,t,n,o,0,s)),i.$kp.KPDynamicLinkList}.apply(t,o))||(e.exports=r)},999:function(e,t,n){(function(t){t.$kp||(t.$kp={}),e.exports=t.$kp.KPSideNavigation=n(1e3)}).call(this,n(39))}});